<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Safari Golf Club Bay Area</title>
    <style>
        /* All existing CSS remains exactly the same */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(135deg, #2d5a27 0%, #4caf50 100%);
            color: white;
            padding: 25px;
            position: relative;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .club-info h1 {
            font-size: 2.4em;
            margin-bottom: 8px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .club-info p {
            font-size: 1.2em;
            opacity: 0.95;
        }
        
        .menu-toggle {
            background: none;
            border: none;
            color: white;
            font-size: 28px;
            cursor: pointer;
            padding: 12px;
            border-radius: 8px;
            transition: background 0.3s ease;
        }
        
        .menu-toggle:hover {
            background: rgba(255,255,255,0.2);
        }
        
        .stats-panel {
            display: none;
            background: rgba(255,255,255,0.98);
            border-radius: 12px;
            padding: 25px;
            margin-top: 20px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.2);
            max-height: 600px;
            overflow-y: auto;
            position: relative;
        }
        
        .stats-panel.active {
            display: block;
            animation: slideDown 0.3s ease-out;
        }
        
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-15px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .close-stats {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            color: #666;
            font-size: 24px;
            cursor: pointer;
            padding: 5px;
            border-radius: 4px;
            transition: all 0.3s ease;
        }
        
        .close-stats:hover {
            color: #333;
            background: rgba(0,0,0,0.1);
        }
        
        .stats-nav {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 15px;
            padding-right: 40px;
        }
        
        .stats-nav-btn {
            background: #f1f8e9;
            border: 2px solid #4caf50;
            color: #2d5a27;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .stats-nav-btn:hover {
            background: #e8f5e8;
        }
        
        .stats-nav-btn.active {
            background: #4caf50;
            color: white;
        }
        
        .stats-content {
            display: none;
        }
        
        .stats-content.active {
            display: block;
            animation: fadeIn 0.3s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .tabs {
            display: flex;
            background: #f1f8e9;
            border-bottom: 3px solid #4caf50;
        }
        
        .tab {
            padding: 18px 30px;
            cursor: pointer;
            border: none;
            background: none;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .tab:hover {
            background: #e8f5e8;
        }
        
        .tab.active {
            background: #4caf50;
            color: white;
        }
        
        .tab-content {
            display: none;
            padding: 30px;
            min-height: 600px;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .dashboard-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            max-width: 1100px;
            margin: 0 auto;
        }
        
        .card {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .card h3 {
            color: #2d5a27;
            margin-bottom: 20px;
            border-bottom: 3px solid #4caf50;
            padding-bottom: 12px;
            font-size: 1.4em;
        }
        
        /* Game Schedule Styles */
        .schedule-controls {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .schedule-btn {
            background: #f1f8e9;
            border: 2px solid #4caf50;
            color: #2d5a27;
            padding: 12px 24px;
            borderRadius: 8px;
            cursor: pointer;
            font-size: 15px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .schedule-btn:hover {
            background: #e8f5e8;
        }
        
        .schedule-btn.active {
            background: #4caf50;
            color: white;
        }
        
        .schedule-container {
            max-height: 500px;
            overflow-y: auto;
            padding-right: 10px;
        }
        
        .schedule-panel {
            display: none;
        }
        
        .schedule-panel.active {
            display: block;
            animation: fadeIn 0.3s ease-out;
        }
        
        .schedule-week {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 5px solid #4caf50;
            transition: transform 0.2s ease;
        }
        
        .schedule-week:hover {
            transform: translateY(-2px);
        }
        
        .week-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .week-title {
            font-weight: bold;
            color: #2d5a27;
            font-size: 1.2em;
        }
        
        .week-dates {
            color: #666;
            font-size: 0.95em;
        }
        
        .players-list {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 15px;
        }
        
        .player {
            background: white;
            padding: 12px 15px;
            border-radius: 8px;
            border: 1px solid #e0e0e0;
            font-weight: 500;
        }
        
        /* Rankings Styles */
        .ranking-item {
            padding: 15px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background 0.2s ease;
        }
        
        .ranking-item:hover {
            background: #f8f9fa;
        }
        
        .ranking-item:last-child {
            border-bottom: none;
        }
        
        .ranking-item.top-3 {
            background: #f1f8e9;
            border-radius: 8px;
            margin-bottom: 8px;
            border-left: 4px solid #4caf50;
        }
        
        .ranking-position {
            font-weight: bold;
            color: #2d5a27;
            min-width: 35px;
            font-size: 1.1em;
        }
        
        .ranking-name {
            flex: 1;
            margin: 0 15px;
            font-size: 1.1em;
        }
        
        .ranking-handicap {
            font-weight: bold;
            color: #666;
            font-size: 1.1em;
        }
        
        .btn {
            background: #4caf50;
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 15px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .btn:hover {
            background: #45a049;
            transform: translateY(-2px);
        }
        
        .btn-secondary {
            background: #6c757d;
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 15px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .btn-secondary:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }
        
        .btn-danger {
            background: #dc3545;
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 15px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .btn-danger:hover {
            background: #c82333;
            transform: translateY(-2px);
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2d5a27;
            font-size: 1.1em;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 15px;
            transition: border-color 0.3s ease;
        }
        
        input:focus, select:focus, textarea:focus {
            border-color: #4caf50;
            outline: none;
        }
        
        textarea {
            height: 120px;
            resize: vertical;
        }
        
        .upcoming-badge {
            background: #ff9800;
            color: white;
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 0.85em;
            margin-left: 12px;
            font-weight: 600;
        }
        
        .past-badge {
            background: #757575;
            color: white;
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 0.85em;
            margin-left: 12px;
            font-weight: 600;
        }
        
        .date-tbc {
            color: #ff9800;
            font-style: italic;
            font-weight: 500;
        }
        
        .membership-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }
        
        .membership-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            border-left: 4px solid #4caf50;
        }
        
        .membership-count {
            font-size: 1.8em;
            font-weight: bold;
            color: #2d5a27;
            margin: 8px 0;
        }
        
        .membership-label {
            font-size: 0.95em;
            color: #666;
        }
        
        .button-group {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .event-item {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 5px solid #2196F3;
            transition: transform 0.2s ease;
        }
        
        .event-item:hover {
            transform: translateY(-2px);
        }
        
        .event-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .event-title {
            font-weight: bold;
            color: #2d5a27;
            font-size: 1.2em;
        }
        
        .event-date {
            color: #666;
            font-size: 0.95em;
        }
        
        .admin-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }
        
        .admin-section {
            margin-bottom: 30px;
        }
        
        .points-form {
            display: flex;
            gap: 10px;
            align-items: end;
        }
        
        .points-input {
            flex: 1;
        }
        
        .form-actions {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }
        
        /* Bylaws Styles */
        .bylaws-container {
            max-width: 900px;
            margin: 0 auto;
        }
        
        .bylaws-article {
            margin-bottom: 25px;
        }
        
        .bylaws-article h3 {
            color: #2d5a27;
            margin-bottom: 15px;
            font-size: 1.4em;
            border-bottom: 2px solid #4caf50;
            padding-bottom: 8px;
        }
        
        .bylaws-section {
            margin-bottom: 20px;
            padding-left: 15px;
        }
        
        .bylaws-section h4 {
            color: #2d5a27;
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        
        .bylaws-section p {
            line-height: 1.6;
            color: #555;
            margin-bottom: 8px;
        }
        
        .bylaws-section ul {
            margin-left: 20px;
            margin-bottom: 15px;
        }
        
        .bylaws-section li {
            line-height: 1.6;
            color: #555;
            margin-bottom: 5px;
        }
        
        /* Contact Support Styles */
        .contact-info {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 25px;
        }
        
        .contact-item {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            padding: 10px;
            background: white;
            border-radius: 8px;
            border-left: 4px solid #4caf50;
        }
        
        .contact-icon {
            font-size: 24px;
            margin-right: 15px;
            color: #4caf50;
        }
        
        .contact-details h4 {
            color: #2d5a27;
            margin-bottom: 5px;
        }
        
        .contact-details p {
            color: #666;
            margin: 0;
        }
        
        /* Admin Login Styles */
        .admin-login {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px;
            text-align: center;
        }
        
        .login-form {
            background: #f9f9f9;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 400px;
        }
        
        .login-form h3 {
            color: #2d5a27;
            margin-bottom: 20px;
        }
        
        .error-message {
            color: #dc3545;
            margin-top: 10px;
            font-weight: 500;
        }
        
        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        
        .modal {
            background: white;
            border-radius: 12px;
            padding: 30px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        
        .modal h3 {
            color: #2d5a27;
            margin-bottom: 20px;
            text-align: center;
        }
        
        /* Edit Game Styles */
        .edit-game-btn {
            background: #2196F3;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-top: 10px;
            margin-right: 10px;
        }
        
        .edit-game-btn:hover {
            background: #0b7dda;
            transform: translateY(-2px);
        }
        
        .edit-players-btn {
            background: #FF9800;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-top: 10px;
        }
        
        .edit-players-btn:hover {
            background: #e68900;
            transform: translateY(-2px);
        }
        
        .game-list {
            margin-top: 20px;
        }
        
        .game-item {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 5px solid #4caf50;
            transition: transform 0.2s ease;
        }
        
        .game-item:hover {
            transform: translateY(-2px);
        }
        
        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .game-title {
            font-weight: bold;
            color: #2d5a27;
            font-size: 1.1em;
        }
        
        .game-date {
            color: #666;
            font-size: 0.9em;
        }
        
        .player-select-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .player-select {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #e0e0e0;
        }
        
        .player-select h4 {
            color: #2d5a27;
            margin-bottom: 10px;
            text-align: center;
        }
        
        /* Contact Edit Styles */
        .contact-edit-form {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #4caf50;
        }
        
        .contact-edit-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .edit-contact-btn {
            background: #2196F3;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .edit-contact-btn:hover {
            background: #0b7dda;
            transform: translateY(-2px);
        }

        /* Enhanced Admin Styles */
        .game-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 15px;
        }
        
        .edit-full-btn {
            background: #9C27B0;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .edit-full-btn:hover {
            background: #7B1FA2;
            transform: translateY(-2px);
        }

        .member-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid #4caf50;
        }
        
        /* Enhanced Member Management Styles */
        .member-management-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }
        
        .member-form-container {
            background: #f9f9f9;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 25px;
            border-left: 5px solid #4caf50;
        }
        
        .member-list-container {
            max-height: 600px;
            overflow-y: auto;
            padding-right: 10px;
        }
        
        .member-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 10px;
        }
        
        .member-actions {
            display: flex;
            gap: 8px;
            margin-top: 15px;
        }
        
        .member-info {
            margin-bottom: 10px;
        }
        
        /* Handicap Officer Dashboard Styles */
        .handicap-dashboard {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
        }
        
        .handicap-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }
        
        .irregularities-list {
            max-height: 400px;
            overflow-y: auto;
            margin-top: 20px;
        }
        
        .irregularity-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid #dc3545;
        }
        
        .handicap-form-container {
            background: #f9f9f9;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 25px;
            border-left: 5px solid #4caf50;
        }
        
        .handicap-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .handicap-member-list {
            max-height: 500px;
            overflow-y: auto;
            padding-right: 10px;
        }
        
        .handicap-officer-login {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px;
            text-align: center;
        }
        
        /* Treasurer and Secretary Styles */
        .treasurer-dashboard, .secretary-dashboard {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
        }
        
        .financial-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }
        
        .meetings-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }
        
        .transaction-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid #4caf50;
        }
        
        .meeting-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid #2196F3;
        }
        
        .financial-summary {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .summary-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            border-left: 4px solid #4caf50;
        }
        
        .summary-value {
            font-size: 1.8em;
            font-weight: bold;
            color: #2d5a27;
            margin: 8px 0;
        }
        
        .summary-label {
            font-size: 0.95em;
            color: #666;
        }
        
        .dues-status {
            margin-top: 15px;
        }
        
        .dues-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            border-bottom: 1px solid #eee;
        }
        
        .dues-status-badge {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8em;
            font-weight: bold;
        }
        
        .paid {
            background: #e8f5e8;
            color: #2d5a27;
        }
        
        .overdue {
            background: #ffeaa7;
            color: #e17055;
        }
        
        .pending {
            background: #dfe6e9;
            color: #636e72;
        }
        
        .not-set {
            background: #f8f9fa;
            color: #6c757d;
        }
        
        .leadership-backup {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border-left: 4px solid #FF9800;
        }
        
        /* VS Player Selection Styles */
        .vs-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        
        .player-card {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #e0e0e0;
            text-align: center;
            flex: 1;
        }
        
        .vs-divider {
            margin: 0 20px;
            font-size: 24px;
            font-weight: bold;
            color: #2d5a27;
        }
        
        .player-card h4 {
            color: #2d5a27;
            margin-bottom: 10px;
        }

        /* Transaction Edit Styles */
        .transaction-actions {
            display: flex;
            gap: 8px;
            margin-top: 10px;
        }
        
        .edit-transaction-btn {
            background: #2196F3;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .edit-transaction-btn:hover {
            background: #0b7dda;
            transform: translateY(-1px);
        }

        /* NEW: Password Reset Styles */
        .password-reset-form {
            background: #f9f9f9;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 25px;
            border-left: 5px solid #4caf50;
        }
        
        .password-reset-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .password-status {
            padding: 10px;
            border-radius: 6px;
            margin-top: 10px;
            font-weight: bold;
            text-align: center;
        }
        
        .password-success {
            background: #e8f5e8;
            color: #2d5a27;
            border: 1px solid #4caf50;
        }
        
        .password-error {
            background: #ffeaa7;
            color: #e17055;
            border: 1px solid #ff9800;
        }
        
        /* NEW: Score Record Table Styles */
        .score-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        .score-table th {
            background: #f1f8e9;
            color: #2d5a27;
            padding: 12px;
            text-align: left;
            border-bottom: 2px solid #4caf50;
        }
        
        .score-table td {
            padding: 12px;
            border-bottom: 1px solid #eee;
        }
        
        .score-table tr:hover {
            background: #f8f9fa;
        }
        
        .score-search {
            margin-bottom: 15px;
        }
        
        .score-search input {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
        }
        
        .score-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .score-form {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #4caf50;
        }
        
        /* NEW: Floating Chat Widget Styles */
        .chat-widget {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }
        
        .chat-button {
            width: 60px;
            height: 60px;
            background: #4caf50;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
        }
        
        .chat-button:hover {
            transform: scale(1.1);
            background: #45a049;
        }
        
        .chat-button i {
            color: white;
            font-size: 24px;
        }
        
        .chat-window {
            position: absolute;
            bottom: 70px;
            right: 0;
            width: 350px;
            height: 500px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 5px 25px rgba(0,0,0,0.2);
            display: none;
            flex-direction: column;
            overflow: hidden;
        }
        
        .chat-window.active {
            display: flex;
            animation: slideUp 0.3s ease-out;
        }
        
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .chat-header {
            background: #4caf50;
            color: white;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .chat-header h3 {
            margin: 0;
            font-size: 16px;
        }
        
        .close-chat {
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
        }
        
        .chat-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .recipient-selector {
            padding: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .recipient-selector select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
        }
        
        .chat-messages {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .message {
            max-width: 80%;
            padding: 10px 15px;
            border-radius: 18px;
            font-size: 14px;
            line-height: 1.4;
        }
        
        .message.sent {
            align-self: flex-end;
            background: #4caf50;
            color: white;
            border-bottom-right-radius: 4px;
        }
        
        .message.received {
            align-self: flex-start;
            background: #f1f1f1;
            color: #333;
            border-bottom-left-radius: 4px;
        }
        
        .message-time {
            font-size: 11px;
            opacity: 0.7;
            margin-top: 5px;
            text-align: right;
        }
        
        .message.received .message-time {
            text-align: left;
        }
        
        .chat-input {
            padding: 15px;
            border-top: 1px solid #eee;
            display: flex;
            gap: 10px;
        }
        
        .chat-input input {
            flex: 1;
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 20px;
            font-size: 14px;
            outline: none;
        }
        
        .chat-input button {
            background: #4caf50;
            color: white;
            border: none;
            border-radius: 20px;
            padding: 10px 20px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.3s;
        }
        
        .chat-input button:hover {
            background: #45a049;
        }
        
        .chat-input button:disabled {
            background: #cccccc;
            cursor: not-allowed;
        }
        
        .no-messages {
            text-align: center;
            padding: 30px;
            color: #666;
        }
        
        .chat-actions {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .chat-actions button {
            flex: 1;
            padding: 8px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
        }
        
        .send-btn {
            background: #4caf50;
            color: white;
        }
        
        .cancel-btn {
            background: #f1f1f1;
            color: #333;
        }
        
        /* Inbox Styles */
        .inbox-container {
            max-height: 400px;
            overflow-y: auto;
            margin-top: 20px;
        }
        
        .inbox-item {
            padding: 12px 15px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .inbox-item:hover {
            background: #f9f9f9;
        }
        
        .inbox-item.unread {
            background: #f1f8e9;
            border-left: 3px solid #4caf50;
        }
        
        .inbox-sender {
            font-weight: bold;
            color: #2d5a27;
            margin-bottom: 5px;
        }
        
        .inbox-preview {
            color: #666;
            font-size: 13px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .inbox-time {
            font-size: 11px;
            color: #999;
            margin-top: 5px;
        }
        
        .message-detail {
            padding: 20px;
            background: #f9f9f9;
            border-radius: 8px;
            margin-top: 15px;
        }
        
        .message-detail-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .message-detail-content {
            line-height: 1.6;
            white-space: pre-line;
        }
        
        .reply-section {
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid #eee;
        }
        
        .reply-input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
            margin-bottom: 10px;
            resize: vertical;
            min-height: 80px;
        }
        
        .empty-inbox {
            text-align: center;
            padding: 40px;
            color: #666;
        }
        
        .inbox-button {
            background: none;
            border: none;
            color: white;
            font-size: 28px;
            cursor: pointer;
            padding: 12px;
            border-radius: 8px;
            transition: background 0.3s ease;
            margin-right: 10px;
        }
        
        .inbox-button:hover {
            background: rgba(255,255,255,0.2);
        }

        /* NEW: Official Inbox Styles */
        .official-inbox {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border-left: 4px solid #4caf50;
        }
        
        .inbox-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .inbox-message {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 3px solid #4caf50;
        }
        
        .inbox-message.unread {
            border-left-color: #ff9800;
        }
        
        .message-meta {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 0.9em;
            color: #666;
        }
        
        .message-content {
            margin-bottom: 10px;
            line-height: 1.5;
        }
        
        .message-actions {
            display: flex;
            gap: 10px;
        }
        
        /* NEW: Registration Form Styles */
        .registration-form {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            max-height: 350px;
            overflow-y: auto;
        }
        
        /* NEW: Role-based posting styles */
        .role-posting-form {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #4caf50;
        }
        
        .post-label {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8em;
            font-weight: bold;
            margin-right: 10px;
        }
        
        .treasurer-label {
            background: #e3f2fd;
            color: #1565c0;
        }
        
        .handicap-label {
            background: #e8f5e8;
            color: #2d5a27;
        }
        
        /* NEW: Member Login Styles */
        .member-login {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px;
            text-align: center;
        }
        
        /* NEW: Member Selector Styles */
        .member-selector {
            margin-bottom: 15px;
        }
        
        .member-selector select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 15px;
        }

        /* NEW: Inbox delete styles */
        .inbox-delete-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .inbox-checkbox {
            margin-right: 10px;
        }
        
        .inbox-message.selected {
            background: #fff3cd;
            border-left-color: #ffc107;
        }
        
        .bulk-delete-btn {
            background: #dc3545;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .bulk-delete-btn:hover {
            background: #c82333;
            transform: translateY(-2px);
        }
        
        .bulk-delete-btn:disabled {
            background: #cccccc;
            cursor: not-allowed;
            transform: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <div class="club-info">
                    <h1>‚õ≥ Safari Golf Club Bay Area üèåÔ∏è‚Äç‚ôÇÔ∏è</h1>
                    <p>Uniting Golfers, Growing Together</p>
                </div>
                <div>
                    <button class="menu-toggle" onclick="toggleStats()">‚ò∞</button>
                </div>
            </div>
            
            <div class="stats-panel" id="statsPanel">
                <button class="close-stats" onclick="closeStats()">‚úï</button>
                <div class="stats-nav">
                    <button class="stats-nav-btn active" onclick="showStatsContent('bylaws')">Club Bylaws</button>
                    <button class="stats-nav-btn" onclick="showStatsContent('membership')">Membership Policy</button>
                    <button class="stats-nav-btn" onclick="showStatsContent('contact')">Contact Support</button>
                </div>
                
                <div id="bylawsContent" class="stats-content active">
                    <div class="bylaws-container">
                        <h2 style="color: #2d5a27; margin-bottom: 25px; text-align: center;">Safari Golf Club Bay Area Bylaws</h2>
                        
                        <div class="bylaws-article">
                            <h3>Article III ‚Äì Membership and Fiscal Year</h3>
                            
                            <div class="bylaws-section">
                                <h4>Section 2: Membership Requirements</h4>
                                <p>‚Ä¢ Members must keep their handicap scores current.</p>
                                <p>‚Ä¢ Members must post all their scores to maintain fairness.</p>
                                <p>‚Ä¢ Guests can join in on club outings and events, but they're encouraged to become members.</p>
                            </div>
                            
                            <div class="bylaws-section">
                                <h4>Section 5: Fiscal Year</h4>
                                <p>‚Ä¢ The fiscal year (financial year) runs from January 1 to December 31.</p>
                                <p>‚Ä¢ This sets the timeframe for budgeting, dues, and financial reporting.</p>
                            </div>
                            
                            <div class="bylaws-section">
                                <h4>Section 6: New Member Process</h4>
                                <p>‚Ä¢ New members must be proposed by an existing member in good standing.</p>
                                <p>‚Ä¢ The Board of Directors will review and vote on whether to accept each new member.</p>
                            </div>
                        </div>
                        
                        <div class="bylaws-article">
                            <h3>Article V ‚Äì Officers and Directors</h3>
                            
                            <div class="bylaws-section">
                                <h4>Section 1: Club Officers</h4>
                                <p>‚Ä¢ Lists the club's officers: Chairman, Treasurer, Handicap Officer, and Secretary.</p>
                                <p>‚Ä¢ These officers are elected each year at a club meeting.</p>
                            </div>
                            
                            <div class="bylaws-section">
                                <h4>Section 2: Chairman Responsibilities</h4>
                                <p>‚Ä¢ Leads all meetings.</p>
                                <p>‚Ä¢ Ensures bylaws and rules are followed.</p>
                                <p>‚Ä¢ Oversees club operations and reports on them annually.</p>
                                <p>‚Ä¢ Appoints committees and is automatically a member of each (ex-officio).</p>
                            </div>
                            
                            <div class="bylaws-section">
                                <h4>Section 3: Secretary Responsibilities</h4>
                                <p>‚Ä¢ Records meeting minutes and handles official correspondence.</p>
                                <p>‚Ä¢ Sends notices and assists with administrative tasks.</p>
                                <p>‚Ä¢ If the President (or Chairman) is absent, the Secretary calls the meeting to order and names someone to lead it temporarily.</p>
                            </div>
                            
                            <div class="bylaws-section">
                                <h4>Section 4: Treasurer Responsibilities</h4>
                                <p>‚Ä¢ Manages all club funds.</p>
                                <p>‚Ä¢ Handles payments and keeps financial records.</p>
                                <p>‚Ä¢ Gives regular financial reports to the board and at club meetings.</p>
                            </div>
                            
                            <div class="bylaws-section">
                                <h4>Section 5: Handicap Officer Responsibilities</h4>
                                <p>‚Ä¢ Maintains all members' handicap records according to official golf rules.</p>
                                <p>‚Ä¢ Reports any irregularities or cheating in handicap records to the Board.</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div id="membershipContent" class="stats-content">
                    <div class="bylaws-container">
                        <h2 style="color: #2d5a27; margin-bottom: 25px; text-align: center;">Membership Policy and Fee Schedule</h2>
                        
                        <div class="bylaws-article">
                            <div class="bylaws-section">
                                <h4>Regular and Associate Club Member Rate</h4>
                                <p>The NCGA is an association of member clubs. Regular and Associate club membership dues will be charged when the member is added to the club's roster. The NCGA requires 100% enrollment of their membership (social members excluded).</p>
                                
                                <ul>
                                    <li>NCGA member rate (new, reinstated or renewed): $46.00</li>
                                    <li>Regular member clubs will also receive a complementary handicap computer system installed at their course.</li>
                                    <li>Multi-members (individuals who maintain a membership at two or more NCGA member clubs) pay full NCGA dues at all NCGA member clubs. Multi-member rebate options are available each summer.</li>
                                </ul>
                            </div>
                            
                            <div class="bylaws-section">
                                <h4>Billing and Payment Process</h4>
                                <ul>
                                    <li>At the beginning of the year the NCGA will issue an invoice for all golfers appearing on the club's active handicap roster.</li>
                                    <li>Additional invoices will then be sent to clubs on a monthly basis for members added to the handicap roster throughout the year.</li>
                                    <li>A club is responsible for NCGA membership dues for all golfers appearing on their handicap roster.</li>
                                    <li>Clubs need not pay membership dues until invoiced.</li>
                                </ul>
                            </div>
                            
                            <div class="bylaws-section">
                                <h4>Delinquency Policy</h4>
                                <p>A club is considered delinquent and will be suspended from all services if annual payments are not received by April 30th each year.</p>
                                
                                <p>Per the NCGA By-laws regarding delinquency:</p>
                                <ul>
                                    <li>As of February 28th, any Club with an outstanding balance of $1,000 or more or with an outstanding balance that represents 25% or more of their January 15th annual billing will receive a letter of notification that they are more than 30 days past due, and they will be assessed 2% interest on their balance as of February 28th.</li>
                                    <li>If as of April 1st, the Club has not remitted payment, they will be notified that they are officially delinquent, and their members will be ineligible for any NCGA competitions. The Club will also continue to be assessed a 2% interest on their balance.</li>
                                    <li>If no payment is received by April 30th, the Club's Handicap service will be cut off and members will receive an NH for a handicap.</li>
                                    <li>If any of these actions must be taken, please know that we will be notifying your Club's members of the situation as it pertains to their membership.</li>
                                </ul>
                                
                                <p><strong>Effective January 2024</strong></p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div id="contactContent" class="stats-content">
                    <!-- This will be populated dynamically -->
                </div>
            </div>
        </header>
        
        <div class="tabs">
            <button class="tab active" onclick="switchTab('dashboard')">Dashboard</button>
            <button class="tab" onclick="switchTab('games')">Games & Events</button>
            <button class="tab" onclick="switchTab('news')">News Feed</button>
            <button class="tab" onclick="switchTab('rankings')">Rankings</button>
            <button class="tab" onclick="switchTab('admin')">Admin</button>
            <button class="tab" onclick="switchTab('handicap')">Handicap Officer</button>
            <button class="tab" onclick="switchTab('treasurer')">Treasurer</button>
            <button class="tab" onclick="switchTab('secretary')">Secretary</button>
        </div>
        
        <!-- Dashboard -->
        <div id="dashboard" class="tab-content active">
            <div class="dashboard-content">
                <div class="card">
                    <h3>Game Schedule</h3>
                    <div class="schedule-controls">
                        <button class="schedule-btn active" onclick="showSchedulePanel('upcoming')">Upcoming Games</button>
                        <button class="schedule-btn" onclick="showSchedulePanel('past')">Past Games</button>
                    </div>
                    
                    <div class="schedule-container">
                        <div id="upcomingSchedule" class="schedule-panel active">
                            <!-- Upcoming games will be populated here -->
                        </div>
                        <div id="pastSchedule" class="schedule-panel">
                            <!-- Past games will be populated here -->
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <h3>Current Rankings</h3>
                    <div id="topRankings">
                        <!-- Top rankings will be populated here -->
                    </div>
                </div>
            </div>
            
            <!-- NEW: Score Record Table -->
            <div class="card" style="grid-column: 1 / -1; margin-top: 30px;">
                <h3>Score Record Table</h3>
                <div class="score-search">
                    <input type="text" id="scoreSearch" placeholder="Search by player name, date, or handicap type..." onkeyup="filterScoreTable()">
                </div>
                <table class="score-table">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Player Name</th>
                            <th>Opponent Name</th>
                            <th>Handicap Type</th>
                            <th>Score</th>
                            <th>Points Earned</th>
                        </tr>
                    </thead>
                    <tbody id="scoreTableBody">
                        <!-- Score records will be populated here -->
                    </tbody>
                </table>
                <div id="noScoresMessage" style="text-align: center; padding: 40px; color: #666; display: none;">
                    <p>No score records available yet.</p>
                    <p>Records will appear here once the Handicap Officer starts recording scores.</p>
                </div>
            </div>
        </div>
        
        <!-- Games & Events -->
        <div id="games" class="tab-content">
            <div class="dashboard-content">
                <div class="card">
                    <h3>Upcoming Games</h3>
                    <div id="upcomingGamesList">
                        <!-- Games will be populated here -->
                    </div>
                </div>
                
                <div class="card">
                    <h3>Club Events</h3>
                    <div id="eventsList">
                        <!-- Events will be populated here -->
                    </div>
                </div>
            </div>
        </div>
        
        <!-- News Feed -->
        <div id="news" class="tab-content">
            <h2 style="color: #2d5a27; margin-bottom: 25px;">Club News Feed</h2>
            
            <div id="newsFeed">
                <!-- News items will be populated here -->
            </div>
        </div>
        
        <!-- Rankings -->
        <div id="rankings" class="tab-content">
            <h2 style="color: #2d5a27; margin-bottom: 25px;">Member Rankings & Handicaps</h2>
            
            <!-- Rankings section left intentionally blank as per requirements -->
            <div class="card">
                <h3>Current Season Rankings</h3>
                <div style="text-align: center; padding: 40px; color: #666;">
                    <p>Rankings will be displayed here once available.</p>
                </div>
            </div>
        </div>
        
        <!-- Admin Dashboard -->
        <div id="admin" class="tab-content">
            <div id="adminLogin" class="admin-login">
                <div class="login-form">
                    <h3>Admin Login Required</h3>
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" id="adminPassword" placeholder="Enter admin password">
                    </div>
                    <button class="btn" onclick="authenticateAdmin()">Login</button>
                    <div id="loginError" class="error-message" style="display: none;">Invalid password</div>
                </div>
            </div>
            
            <div id="adminContent" style="display: none;">
                <h2 style="color: #2d5a27; margin-bottom: 25px;">Admin Dashboard</h2>
                
                <!-- NEW: Official Inbox for Admin -->
                <div class="card admin-section">
                    <h3>üì• Official Inbox</h3>
                    <div class="official-inbox" id="adminInbox">
                        <!-- Admin inbox messages will be populated here -->
                    </div>
                </div>
                
                <div class="admin-grid">
                    <!-- Left Column -->
                    <div>
                        <!-- NEW: Password Reset Section -->
                        <div class="card admin-section">
                            <h3>üîê Password Management</h3>
                            <div class="password-reset-form">
                                <h4 style="color: #2d5a27; margin-bottom: 20px;">Reset Official Passwords</h4>
                                <div class="password-reset-grid">
                                    <div>
                                        <div class="form-group">
                                            <label>Handicap Officer Password</label>
                                            <input type="password" id="newHandicapPassword" placeholder="New password">
                                            <button class="btn" style="margin-top: 10px; width: 100%;" onclick="resetPassword('handicap')">Reset Password</button>
                                            <div id="handicapPasswordStatus" class="password-status" style="display: none;"></div>
                                        </div>
                                    </div>
                                    <div>
                                        <div class="form-group">
                                            <label>Treasurer Password</label>
                                            <input type="password" id="newTreasurerPassword" placeholder="New password">
                                            <button class="btn" style="margin-top: 10px; width: 100%;" onclick="resetPassword('treasurer')">Reset Password</button>
                                            <div id="treasurerPasswordStatus" class="password-status" style="display: none;"></div>
                                        </div>
                                    </div>
                                    <div>
                                        <div class="form-group">
                                            <label>Secretary Password</label>
                                            <input type="password" id="newSecretaryPassword" placeholder="New password">
                                            <button class="btn" style="margin-top: 10px; width: 100%;" onclick="resetPassword('secretary')">Reset Password</button>
                                            <div id="secretaryPasswordStatus" class="password-status" style="display: none;"></div>
                                        </div>
                                    </div>
                                </div>
                                <div style="margin-top: 20px; padding: 15px; background: #fff3cd; border-radius: 8px; border-left: 4px solid #ffc107;">
                                    <strong>Security Notice:</strong> Passwords are private and should never be shared among officials. Only reset passwords when necessary for security reasons.
                                </div>
                            </div>
                        </div>
                        
                        <!-- Membership Management -->
                        <div class="card admin-section">
                            <h3>Membership Management</h3>
                            <div class="member-management-grid">
                                <div>
                                    <div class="member-form-container">
                                        <h4 style="color: #2d5a27; margin-bottom: 20px;" id="memberFormTitle">Add New Member</h4>
                                        <div class="form-group">
                                            <label>Full Name</label>
                                            <input type="text" id="memberName" placeholder="Enter full name">
                                        </div>
                                        <div class="form-group">
                                            <label>Email</label>
                                            <input type="email" id="memberEmail" placeholder="Enter email">
                                        </div>
                                        <div class="form-group">
                                            <label>Handicap</label>
                                            <input type="number" id="memberHandicap" step="0.1" placeholder="Enter handicap (optional)">
                                        </div>
                                        <div class="form-group">
                                            <label>Membership Type</label>
                                            <select id="memberType">
                                                <option value="regular">Regular Member</option>
                                                <option value="associate">Associate Member</option>
                                                <option value="junior">Junior Member</option>
                                                <option value="social">Social Member</option>
                                            </select>
                                        </div>
                                        <div class="form-actions">
                                            <button class="btn" id="memberSaveBtn" onclick="saveMember()">Save Member</button>
                                            <button class="btn-secondary" id="memberCancelBtn" onclick="resetMemberForm()" style="display: none;">Cancel</button>
                                        </div>
                                    </div>
                                    
                                    <div class="membership-grid">
                                        <div class="membership-item">
                                            <div class="membership-label">Regular Members</div>
                                            <div class="membership-count" id="regularCount">0</div>
                                        </div>
                                        <div class="membership-item">
                                            <div class="membership-label">Associate Members</div>
                                            <div class="membership-count" id="associateCount">0</div>
                                        </div>
                                        <div class="membership-item">
                                            <div class="membership-label">Junior Members</div>
                                            <div class="membership-count" id="juniorCount">0</div>
                                        </div>
                                        <div class="membership-item">
                                            <div class="membership-label">Social Members</div>
                                            <div class="membership-count" id="socialCount">0</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="member-list-container">
                                    <h4 style="color: #2d5a27; margin-bottom: 15px;">Member List & Management</h4>
                                    <div id="membersListAdmin">
                                        <!-- Members will be listed here with edit/delete options -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Points Management -->
                        <div class="card admin-section">
                            <h3>Points Management</h3>
                            <div class="form-group">
                                <label>Select Member</label>
                                <select id="pointsMemberSelect">
                                    <!-- Members will be populated here -->
                                </select>
                            </div>
                            <div class="points-form">
                                <div class="form-group points-input">
                                    <label>Add Points</label>
                                    <input type="number" id="pointsToAdd" placeholder="Enter points to add" min="0">
                                </div>
                                <button class="btn" onclick="addPoints()">Add Points</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Right Column -->
                    <div>
                        <!-- News Management - ENHANCED: Added edit and delete functionality -->
                        <div class="card admin-section">
                            <h3>News Management</h3>
                            <div class="button-group">
                                <button class="btn" onclick="showNewsForm()">+ Post News</button>
                            </div>
                            
                            <div id="newsForm" style="display: none; background: #f9f9f9; padding: 25px; border-radius: 12px; margin-bottom: 25px; border-left: 5px solid #4caf50;">
                                <h4 style="color: #2d5a27; margin-bottom: 20px;" id="newsFormTitle">Create News Post</h4>
                                <div class="form-group">
                                    <label>Title</label>
                                    <input type="text" id="newsTitle" placeholder="Enter news title">
                                </div>
                                <div class="form-group">
                                    <label>Content</label>
                                    <textarea id="newsContent" placeholder="Enter news content"></textarea>
                                </div>
                                <div class="form-actions">
                                    <button class="btn" id="newsSaveBtn" onclick="saveNews()">Post News</button>
                                    <button class="btn-secondary" onclick="hideNewsForm()">Cancel</button>
                                    <button class="btn-danger" id="newsDeleteBtn" onclick="deleteNews()" style="display: none;">Delete News</button>
                                </div>
                            </div>
                            
                            <h4 style="color: #2d5a27; margin-top: 20px; margin-bottom: 15px;">Manage Existing News</h4>
                            <div id="newsListAdmin" style="max-height: 400px; overflow-y: auto;">
                                <!-- News items with edit/delete options will be listed here -->
                            </div>
                        </div>
                        
                        <!-- Game & Event Management - ENHANCED: Added delete functionality -->
                        <div class="card admin-section">
                            <h3>Game & Event Management</h3>
                            <div class="button-group">
                                <button class="btn" onclick="showGameForm()">+ Schedule New Game</button>
                                <button class="btn-secondary" onclick="showEventForm()">+ Add New Event</button>
                            </div>
                            
                            <!-- Game Form -->
                            <div id="gameForm" style="display: none; background: #f9f9f9; padding: 25px; border-radius: 12px; margin-bottom: 25px; border-left: 5px solid #4caf50;">
                                <h4 style="color: #2d5a27; margin-bottom: 20px;">Schedule New Game</h4>
                                <div class="form-group">
                                    <label>Game Name</label>
                                    <input type="text" id="gameName" placeholder="Enter game name">
                                </div>
                                <div class="form-group">
                                    <label>Date</label>
                                    <input type="date" id="gameDate">
                                </div>
                                <div class="form-group">
                                    <label>Host</label>
                                    <input type="text" id="gameHost" placeholder="Enter host name">
                                </div>
                                <div class="form-group">
                                    <label>Description</label>
                                    <textarea id="gameDescription" placeholder="Enter game description"></textarea>
                                </div>
                                <!-- VS Player Selection -->
                                <div class="vs-container">
                                    <div class="player-card">
                                        <h4>Player 1</h4>
                                        <select id="gamePlayer1">
                                            <!-- Members will be populated here -->
                                        </select>
                                    </div>
                                    <div class="vs-divider">VS</div>
                                    <div class="player-card">
                                        <h4>Player 2</h4>
                                        <select id="gamePlayer2">
                                            <!-- Members will be populated here -->
                                        </select>
                                    </div>
                                </div>
                                <div class="form-actions">
                                    <button class="btn" onclick="saveGame()">Save Game</button>
                                    <button class="btn-secondary" onclick="hideGameForm()">Cancel</button>
                                </div>
                            </div>
                            
                            <!-- Event Form -->
                            <div id="eventForm" style="display: none; background: #f9f9f9; padding: 25px; border-radius: 12px; margin-bottom: 25px; border-left: 5px solid #2196F3;">
                                <h4 style="color: #2d5a27; margin-bottom: 20px;">Add New Event</h4>
                                <div class="form-group">
                                    <label>Event Name</label>
                                    <input type="text" id="eventName" placeholder="Enter event name">
                                </div>
                                <div class="form-group">
                                    <label>Event Date</label>
                                    <input type="date" id="eventDate">
                                </div>
                                <div class="form-group">
                                    <label>Event Type</label>
                                    <select id="eventType">
                                        <option value="social">Social Event</option>
                                        <option value="meeting">Club Meeting</option>
                                        <option value="tournament">Tournament</option>
                                        <option value="fundraiser">Fundraiser</option>
                                        <option value="other">Other</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Location</label>
                                    <input type="text" id="eventLocation" placeholder="Enter event location">
                                </div>
                                <div class="form-group">
                                    <label>Description</label>
                                    <textarea id="eventDescription" placeholder="Enter event description"></textarea>
                                </div>
                                <div class="form-actions">
                                    <button class="btn" onclick="saveEvent()">Save Event</button>
                                    <button class="btn-secondary" onclick="hideEventForm()">Cancel</button>
                                </div>
                            </div>
                            
                            <h4 style="color: #2d5a27; margin-top: 20px; margin-bottom: 15px;">Manage Existing Games & Events</h4>
                            <div class="game-list" id="upcomingGamesAdmin">
                                <!-- Upcoming games for editing will be populated here -->
                            </div>
                            
                            <div id="eventsListAdmin" style="margin-top: 20px;">
                                <!-- Events with delete options will be populated here -->
                            </div>
                        </div>
                        
                        <!-- Contact Support Management -->
                        <div class="card admin-section">
                            <h3>Contact Support Management</h3>
                            <div class="button-group">
                                <button class="btn" onclick="showContactForm()">+ Add Contact</button>
                            </div>
                            
                            <div id="contactForm" style="display: none; background: #f9f9f9; padding: 25px; border-radius: 12px; margin-bottom: 25px; border-left: 5px solid #4caf50;">
                                <h4 style="color: #2d5a27; margin-bottom: 20px;">Add New Contact</h4>
                                <div class="form-group">
                                    <label>Contact Type</label>
                                    <select id="contactType">
                                        <option value="email">Email Support</option>
                                        <option value="phone">Phone Support</option>
                                        <option value="chairman">Club Chairman</option>
                                        <option value="treasurer">Treasurer</option>
                                        <option value="handicap">Handicap Officer</option>
                                        <option value="other">Other</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Title/Name</label>
                                    <input type="text" id="contactTitle" placeholder="e.g., Email Support or Sammy">
                                </div>
                                <div class="form-group">
                                    <label>Contact Details</label>
                                    <input type="text" id="contactDetails" placeholder="e.g., support@safarigolfclub.com or (555) 123-4567">
                                </div>
                                <div class="form-group">
                                    <label>Description</label>
                                    <input type="text" id="contactDescription" placeholder="e.g., We typically respond within 24 hours">
                                </div>
                                <div class="form-actions">
                                    <button class="btn" onclick="saveContact()">Save Contact</button>
                                    <button class="btn-secondary" onclick="hideContactForm()">Cancel</button>
                                </div>
                            </div>
                            
                            <div id="contactsList">
                                <!-- Contacts will be populated here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Handicap Officer Dashboard - ENHANCED: Added more power and fixed reset functionality -->
        <div id="handicap" class="tab-content">
            <div id="handicapLogin" class="admin-login">
                <div class="login-form">
                    <h3>Handicap Officer Login Required</h3>
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" id="handicapPassword" placeholder="Enter handicap officer password">
                    </div>
                    <button class="btn" onclick="authenticateHandicapOfficer()">Login</button>
                    <div id="handicapLoginError" class="error-message" style="display: none;">Invalid password</div>
                </div>
            </div>
            
            <div id="handicapContent" style="display: none;">
                <h2 style="color: #2d5a27; margin-bottom: 25px;">Handicap Officer Dashboard</h2>
                
                <!-- NEW: Official Inbox for Handicap Officer -->
                <div class="card admin-section">
                    <h3>üì• Official Inbox</h3>
                    <div class="official-inbox" id="handicapInbox">
                        <!-- Handicap Officer inbox messages will be populated here -->
                    </div>
                </div>
                
                <!-- NEW: Handicap Officer Posting Form -->
                <div class="card admin-section">
                    <h3>üì¢ Post News Feed</h3>
                    <div class="role-posting-form">
                        <h4 style="color: #2d5a27; margin-bottom: 20px;">Create News Post</h4>
                        <div class="form-group">
                            <label>Title</label>
                            <input type="text" id="handicapNewsTitle" placeholder="Enter news title">
                        </div>
                        <div class="form-group">
                            <label>Content</label>
                            <textarea id="handicapNewsContent" placeholder="Enter news content"></textarea>
                        </div>
                        <div class="form-actions">
                            <button class="btn" onclick="saveHandicapNews()">Post News</button>
                            <button class="btn-secondary" onclick="resetHandicapNewsForm()">Clear</button>
                        </div>
                    </div>
                </div>
                
                <div class="handicap-dashboard">
                    <div class="handicap-grid">
                        <!-- Left Column: Handicap Management -->
                        <div>
                            <div class="card admin-section">
                                <h3>Handicap & Points Management</h3>
                                
                                <div class="handicap-form-container">
                                    <h4 style="color: #2d5a27; margin-bottom: 20px;">Update Member Handicap & Points</h4>
                                    <div class="form-group">
                                        <label>Select Member</label>
                                        <select id="handicapMemberSelect">
                                            <!-- Members will be populated here -->
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label>Current Handicap</label>
                                        <input type="text" id="currentHandicapDisplay" readonly style="background: #f5f5f5;">
                                    </div>
                                    <div class="form-group">
                                        <label>New Handicap</label>
                                        <input type="number" id="newHandicap" step="0.1" placeholder="Enter new handicap">
                                    </div>
                                    <div class="form-group">
                                        <label>Handicap Type</label>
                                        <select id="handicapType">
                                            <option value="Handicap Index">Handicap Index</option>
                                            <option value="Course Handicap">Course Handicap</option>
                                            <option value="Playing Handicap">Playing Handicap</option>
                                            <option value="Competition Handicap">Competition Handicap</option>
                                            <option value="Local Handicap">Local Handicap</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label>Current Points</label>
                                        <input type="text" id="currentPointsDisplay" readonly style="background: #f5f5f5;">
                                    </div>
                                    <div class="form-group">
                                        <label>Add/Subtract Points</label>
                                        <input type="number" id="pointsAdjustment" placeholder="Enter points (use negative to subtract)">
                                    </div>
                                    <div class="form-actions">
                                        <button class="btn" onclick="updateMemberHandicap()">Update Handicap</button>
                                        <button class="btn" onclick="adjustMemberPoints()">Adjust Points</button>
                                        <button class="btn-secondary" onclick="resetHandicapForm()">Reset Form</button>
                                        <!-- NEW: Reset Handicap to Zero Button -->
                                        <button class="btn-danger" onclick="resetHandicapToZero()">Reset Handicap to Zero</button>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card admin-section">
                                <h3>Quick Points Management</h3>
                                <div class="form-group">
                                    <label>Select Member</label>
                                    <select id="quickPointsMemberSelect">
                                        <!-- Members will be populated here -->
                                    </select>
                                </div>
                                <div class="points-form">
                                    <div class="form-group points-input">
                                        <label>Add Points</label>
                                        <input type="number" id="quickPointsToAdd" placeholder="Enter points to add" min="0">
                                    </div>
                                    <button class="btn" onclick="addQuickPoints()">Add Points</button>
                                </div>
                            </div>
                            
                            <!-- NEW: Score Recording Section -->
                            <div class="card admin-section">
                                <h3>Record Golf Score</h3>
                                <div class="score-form">
                                    <div class="form-group">
                                        <label>Date</label>
                                        <input type="date" id="scoreDate">
                                    </div>
                                    <div class="form-group">
                                        <label>Player Name</label>
                                        <select id="scorePlayer">
                                            <!-- Members will be populated here -->
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label>Opponent Name</label>
                                        <select id="scoreOpponent">
                                            <!-- Members will be populated here -->
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label>Handicap Type</label>
                                        <select id="scoreHandicapType">
                                            <option value="Handicap Index">Handicap Index</option>
                                            <option value="Course Handicap">Course Handicap</option>
                                            <option value="Playing Handicap">Playing Handicap</option>
                                            <option value="Competition Handicap">Competition Handicap</option>
                                            <option value="Local Handicap">Local Handicap</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label>Score</label>
                                        <input type="number" id="scoreValue" placeholder="Enter score">
                                    </div>
                                    <div class="form-group">
                                        <label>Points Earned</label>
                                        <input type="number" id="scorePoints" placeholder="Enter points earned">
                                    </div>
                                    <div class="form-actions">
                                        <button class="btn" onclick="recordScore()">Record Score</button>
                                        <button class="btn-secondary" onclick="resetScoreForm()">Reset Form</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Right Column: Irregularities Tracking and Enhanced Controls -->
                        <div>
                            <div class="card admin-section">
                                <h3>Record Irregularity / Cheating</h3>
                                <div class="form-group">
                                    <label>Select Member</label>
                                    <select id="irregularityMemberSelect">
                                        <!-- Members will be populated here -->
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Date of Incident</label>
                                    <input type="date" id="irregularityDate">
                                </div>
                                <div class="form-group">
                                    <label>Description of Irregularity</label>
                                    <textarea id="irregularityDescription" placeholder="Describe the handicap irregularity or cheating incident"></textarea>
                                </div>
                                <div class="form-group">
                                    <label>Severity Level</label>
                                    <select id="irregularitySeverity">
                                        <option value="minor">Minor - Warning</option>
                                        <option value="moderate">Moderate - Points Deduction</option>
                                        <option value="major">Major - Suspension Consideration</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Action Taken</label>
                                    <textarea id="irregularityAction" placeholder="Describe action taken"></textarea>
                                </div>
                                <div class="form-actions">
                                    <button class="btn" onclick="recordIrregularity()">Record Incident</button>
                                    <button class="btn-secondary" onclick="resetIrregularityForm()">Clear Form</button>
                                    <!-- NEW: Reset Recent Irregularities Button -->
                                    <button class="btn-danger" onclick="resetRecentIrregularities()">Reset Recent Irregularities</button>
                                </div>
                            </div>
                            
                            <div class="card admin-section">
                                <h3>Recent Irregularities</h3>
                                <div class="irregularities-list" id="irregularitiesList">
                                    <!-- Irregularities will be listed here -->
                                </div>
                            </div>
                            
                            <!-- NEW: Enhanced Handicap Officer Controls -->
                            <div class="card admin-section">
                                <h3>Ranking Controls</h3>
                                <div class="form-group">
                                    <label>Reset All Points</label>
                                    <p style="color: #666; font-size: 0.9em; margin-bottom: 10px;">This will set all member points to zero. This action can be undone.</p>
                                    <button class="btn-danger" onclick="resetAllPoints()" style="width: 100%;">Reset All Points to Zero</button>
                                </div>
                                <div class="form-group">
                                    <label>Undo Last Reset</label>
                                    <p style="color: #666; font-size: 0.9em; margin-bottom: 10px;">Restore points to their values before the last reset.</p>
                                    <button class="btn" onclick="undoReset()" style="width: 100%;">Undo Last Reset</button>
                                </div>
                                <div class="form-group">
                                    <label>Reset Specific Member Points</label>
                                    <select id="resetMemberSelect">
                                        <!-- Members will be populated here -->
                                    </select>
                                    <button class="btn-secondary" onclick="resetMemberPoints()" style="width: 100%; margin-top: 10px;">Reset This Member's Points</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Member List for Handicap Officer -->
                    <div class="card admin-section">
                        <h3>Member Handicap Records</h3>
                        <div class="handicap-member-list" id="handicapMembersList">
                            <!-- Members with handicaps will be listed here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Treasurer Dashboard - MODIFIED: Removed Member Dues sections -->
        <div id="treasurer" class="tab-content">
            <div id="treasurerLogin" class="admin-login">
                <div class="login-form">
                    <h3>Treasurer Login Required</h3>
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" id="treasurerPassword" placeholder="Enter treasurer password">
                    </div>
                    <button class="btn" onclick="authenticateTreasurer()">Login</button>
                    <div id="treasurerLoginError" class="error-message" style="display: none;">Invalid password</div>
                </div>
            </div>
            
            <div id="treasurerContent" style="display: none;">
                <h2 style="color: #2d5a27; margin-bottom: 25px;">Treasurer Dashboard</h2>
                
                <!-- NEW: Official Inbox for Treasurer -->
                <div class="card admin-section">
                    <h3>üì• Official Inbox</h3>
                    <div class="official-inbox" id="treasurerInbox">
                        <!-- Treasurer inbox messages will be populated here -->
                    </div>
                </div>
                
                <!-- NEW: Treasurer Posting Form -->
                <div class="card admin-section">
                    <h3>üí∞ Post Financial Feed</h3>
                    <div class="role-posting-form">
                        <h4 style="color: #2d5a27; margin-bottom: 20px;">Create Financial Update</h4>
                        <div class="form-group">
                            <label>Title</label>
                            <input type="text" id="treasurerNewsTitle" placeholder="Enter financial update title">
                        </div>
                        <div class="form-group">
                            <label>Content</label>
                            <textarea id="treasurerNewsContent" placeholder="Enter financial update content"></textarea>
                        </div>
                        <div class="form-actions">
                            <button class="btn" onclick="saveTreasurerNews()">Post Financial Update</button>
                            <button class="btn-secondary" onclick="resetTreasurerNewsForm()">Clear</button>
                        </div>
                    </div>
                </div>
                
                <div class="treasurer-dashboard">
                    <div class="financial-grid">
                        <!-- Left Column: Financial Overview -->
                        <div>
                            <div class="card admin-section">
                                <h3>üíµ Financial Overview</h3>
                                <div class="financial-summary">
                                    <div class="summary-item">
                                        <div class="summary-label">Current Balance</div>
                                        <div class="summary-value" id="currentBalance">$0.00</div>
                                    </div>
                                    <div class="summary-item">
                                        <div class="summary-label">Income This Month</div>
                                        <div class="summary-value" id="monthlyIncome">$0.00</div>
                                    </div>
                                    <div class="summary-item">
                                        <div class="summary-label">Expenses This Month</div>
                                        <div class="summary-value" id="monthlyExpenses">$0.00</div>
                                    </div>
                                    <div class="summary-item">
                                        <div class="summary-label">Net This Month</div>
                                        <div class="summary-value" id="monthlyNet">$0.00</div>
                                    </div>
                                </div>
                                
                                <h4 style="color: #2d5a27; margin-top: 20px; margin-bottom: 15px;">Recent Transactions</h4>
                                <div class="transaction-list" id="recentTransactions" style="max-height: 300px; overflow-y: auto;">
                                    <!-- Transactions will be listed here -->
                                </div>
                            </div>
                            
                            <div class="card admin-section">
                                <h3>üßæ Payments & Receipts</h3>
                                <div class="button-group">
                                    <button class="btn" onclick="showTransactionForm('income')">+ Add Income</button>
                                    <button class="btn-secondary" onclick="showTransactionForm('expense')">+ Add Expense</button>
                                </div>
                                
                                <div id="transactionForm" style="display: none; background: #f9f9f9; padding: 25px; border-radius: 12px; margin-bottom: 25px; border-left: 5px solid #4caf50;">
                                    <h4 style="color: #2d5a27; margin-bottom: 20px;" id="transactionFormTitle">Add Transaction</h4>
                                    <div class="form-group">
                                        <label>Transaction Type</label>
                                        <select id="transactionType">
                                            <option value="income">Income</option>
                                            <option value="expense">Expense</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label>Amount</label>
                                        <input type="number" id="transactionAmount" step="0.01" placeholder="Enter amount">
                                    </div>
                                    <div class="form-group">
                                        <label>Description</label>
                                        <input type="text" id="transactionDescription" placeholder="Enter description">
                                    </div>
                                    <!-- Member Association Field -->
                                    <div class="form-group">
                                        <label>Associated Member</label>
                                        <select id="transactionMember">
                                            <option value="">None (General Transaction)</option>
                                            <!-- Members will be populated here -->
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label>Category</label>
                                        <select id="transactionCategory">
                                            <option value="dues">Membership Dues</option>
                                            <option value="event">Event Fees</option>
                                            <option value="sponsorship">Sponsorship</option>
                                            <option value="equipment">Equipment</option>
                                            <option value="venue">Venue Rental</option>
                                            <option value="other">Other</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label>Date</label>
                                        <input type="date" id="transactionDate">
                                    </div>
                                    <div class="form-actions">
                                        <button class="btn" onclick="saveTransaction()">Save Transaction</button>
                                        <button class="btn-secondary" onclick="hideTransactionForm()">Cancel</button>
                                    </div>
                                </div>
                                
                                <h4 style="color: #2d5a27; margin-top: 20px; margin-bottom: 15px;">All Transactions</h4>
                                <div class="transaction-list" id="allTransactions" style="max-height: 400px; overflow-y: auto;">
                                    <!-- All transactions will be listed here -->
                                </div>
                            </div>
                        </div>
                        
                        <!-- Right Column: Enhanced Financial Reports (REPLACED Member Dues) -->
                        <div>
                            <div class="card admin-section">
                                <h3>üìä Financial Reports</h3>
                                <div class="button-group">
                                    <button class="btn" onclick="generateMonthlyReport()">Generate Monthly Report</button>
                                    <button class="btn-secondary" onclick="generateAnnualReport()">Generate Annual Report</button>
                                    <button class="btn" onclick="exportFinancialData()">Export Data</button>
                                </div>
                                
                                <div id="monthlyReport" style="display: none; background: #f9f9f9; padding: 25px; border-radius: 12px; margin-top: 20px; border-left: 5px solid #4caf50;">
                                    <h4 style="color: #2d5a27; margin-bottom: 20px;">Monthly Financial Report</h4>
                                    <div id="reportContent">
                                        <!-- Report content will be generated here -->
                                    </div>
                                    <div class="form-actions" style="margin-top: 20px;">
                                        <button class="btn" onclick="printReport()">Print Report</button>
                                        <button class="btn-secondary" onclick="hideReport()">Close</button>
                                    </div>
                                </div>
                                
                                <div id="annualReport" style="display: none; background: #f9f9f9; padding: 25px; border-radius: 12px; margin-top: 20px; border-left: 5px solid #2196F3;">
                                    <h4 style="color: #2d5a27; margin-bottom: 20px;">Annual Financial Report</h4>
                                    <div id="annualReportContent">
                                        <!-- Annual report content will be generated here -->
                                    </div>
                                    <div class="form-actions" style="margin-top: 20px;">
                                        <button class="btn" onclick="printAnnualReport()">Print Report</button>
                                        <button class="btn-secondary" onclick="hideAnnualReport()">Close</button>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card admin-section">
                                <h3>üìà Financial Analytics</h3>
                                <div class="financial-summary">
                                    <div class="summary-item">
                                        <div class="summary-label">Total Income YTD</div>
                                        <div class="summary-value" id="ytdIncome">$0.00</div>
                                    </div>
                                    <div class="summary-item">
                                        <div class="summary-label">Total Expenses YTD</div>
                                        <div class="summary-value" id="ytdExpenses">$0.00</div>
                                    </div>
                                    <div class="summary-item">
                                        <div class="summary-label">Avg Monthly Income</div>
                                        <div class="summary-value" id="avgMonthlyIncome">$0.00</div>
                                    </div>
                                    <div class="summary-item">
                                        <div class="summary-label">Largest Expense</div>
                                        <div class="summary-value" id="largestExpense">$0.00</div>
                                    </div>
                                </div>
                                
                                <h4 style="color: #2d5a27; margin-top: 20px; margin-bottom: 15px;">Top Expense Categories</h4>
                                <div id="expenseCategories" style="max-height: 200px; overflow-y: auto;">
                                    <!-- Expense categories will be listed here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Secretary Dashboard - ENHANCED: Meeting scheduling goes to news feed, improved minutes recording -->
        <div id="secretary" class="tab-content">
            <div id="secretaryLogin" class="admin-login">
                <div class="login-form">
                    <h3>Secretary Login Required</h3>
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" id="secretaryPassword" placeholder="Enter secretary password">
                    </div>
                    <button class="btn" onclick="authenticateSecretary()">Login</button>
                    <div id="secretaryLoginError" class="error-message" style="display: none;">Invalid password</div>
                </div>
            </div>
            
            <div id="secretaryContent" style="display: none;">
                <h2 style="color: #2d5a27; margin-bottom: 25px;">Secretary Dashboard</h2>
                
                <!-- NEW: Official Inbox for Secretary -->
                <div class="card admin-section">
                    <h3>üì• Official Inbox</h3>
                    <div class="official-inbox" id="secretaryInbox">
                        <!-- Secretary inbox messages will be populated here -->
                    </div>
                </div>
                
                <div class="secretary-dashboard">
                    <div class="meetings-grid">
                        <!-- Left Column: Meetings -->
                        <div>
                            <div class="card admin-section">
                                <h3>üìÖ Meetings</h3>
                                <div class="button-group">
                                    <button class="btn" onclick="showMeetingForm()">+ Schedule Meeting</button>
                                </div>
                                
                                <div id="meetingForm" style="display: none; background: #f9f9f9; padding: 25px; border-radius: 12px; margin-bottom: 25px; border-left: 5px solid #4caf50;">
                                    <h4 style="color: #2d5a27; margin-bottom: 20px;">Schedule New Meeting</h4>
                                    <div class="form-group">
                                        <label>Meeting Title</label>
                                        <input type="text" id="meetingTitle" placeholder="Enter meeting title">
                                    </div>
                                    <div class="form-group">
                                        <label>Date</label>
                                        <input type="date" id="meetingDate">
                                    </div>
                                    <div class="form-group">
                                        <label>Time</label>
                                        <input type="time" id="meetingTime">
                                    </div>
                                    <div class="form-group">
                                        <label>Location</label>
                                        <input type="text" id="meetingLocation" placeholder="Enter meeting location">
                                    </div>
                                    <div class="form-group">
                                        <label>Agenda</label>
                                        <textarea id="meetingAgenda" placeholder="Enter meeting agenda"></textarea>
                                    </div>
                                    <div class="form-actions">
                                        <button class="btn" onclick="saveMeeting()">Save Meeting</button>
                                        <button class="btn-secondary" onclick="hideMeetingForm()">Cancel</button>
                                    </div>
                                </div>
                                
                                <h4 style="color: #2d5a27; margin-top: 20px; margin-bottom: 15px;">Next Meeting</h4>
                                <div id="nextMeeting">
                                    <!-- Next meeting will be displayed here -->
                                </div>
                                
                                <h4 style="color: #2d5a27; margin-top: 20px; margin-bottom: 15px;">Past Meetings</h4>
                                <div class="meeting-list" id="pastMeetings" style="max-height: 400px; overflow-y: auto;">
                                    <!-- Past meetings will be listed here -->
                                </div>
                            </div>
                            
                            <div class="card admin-section">
                                <h3>üìù Record Minutes</h3>
                                <div class="form-group">
                                    <label>Meeting Title</label>
                                    <input type="text" id="minutesMeetingTitle" placeholder="Enter meeting title">
                                </div>
                                <div class="form-group">
                                    <label>Meeting Date</label>
                                    <input type="date" id="minutesMeetingDate">
                                </div>
                                <div class="form-group">
                                    <label>Meeting Minutes</label>
                                    <textarea id="meetingMinutes" placeholder="Enter meeting minutes"></textarea>
                                </div>
                                <div class="form-group">
                                    <label>Attachments</label>
                                    <input type="file" id="meetingAttachments" multiple>
                                </div>
                                <div class="form-actions">
                                    <button class="btn" onclick="saveMinutes()">Save Minutes</button>
                                    <button class="btn-secondary" onclick="clearMinutesForm()">Clear</button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Right Column: Notices & Correspondence - ENHANCED: Notices go to news feed -->
                        <div>
                            <div class="card admin-section">
                                <h3>üì¢ Notices & Correspondence</h3>
                                <div class="button-group">
                                    <button class="btn" onclick="showNoticeForm()">+ Send Notice</button>
                                </div>
                                
                                <div id="noticeForm" style="display: none; background: #f9f9f9; padding: 25px; border-radius: 12px; margin-bottom: 25px; border-left: 5px solid #4caf50;">
                                    <h4 style="color: #2d5a27; margin-bottom: 20px;">Create Notice</h4>
                                    <div class="form-group">
                                        <label>Notice Title</label>
                                        <input type="text" id="noticeTitle" placeholder="Enter notice title">
                                    </div>
                                    <div class="form-group">
                                        <label>Content</label>
                                        <textarea id="noticeContent" placeholder="Enter notice content"></textarea>
                                    </div>
                                    <div class="form-group">
                                        <label>Recipients</label>
                                        <select id="noticeRecipients">
                                            <option value="all">All Members</option>
                                            <option value="board">Board Members Only</option>
                                            <option value="specific">Specific Members</option>
                                        </select>
                                    </div>
                                    <div class="form-actions">
                                        <button class="btn" onclick="sendNotice()">Send Notice</button>
                                        <button class="btn-secondary" onclick="hideNoticeForm()">Cancel</button>
                                    </div>
                                </div>
                                
                                <h4 style="color: #2d5a27; margin-top: 20px; margin-bottom: 15px;">Recent Notices</h4>
                                <div class="notice-list" id="recentNotices" style="max-height: 400px; overflow-y: auto;">
                                    <!-- Recent notices will be listed here -->
                                </div>
                            </div>
                            
                            <div class="card admin-section">
                                <h3>üë• Leadership Backup</h3>
                                <div class="leadership-backup">
                                    <div class="form-group">
                                        <label>Chairman Status</label>
                                        <select id="chairmanStatus">
                                            <option value="present">Present</option>
                                            <option value="absent">Absent</option>
                                        </select>
                                    </div>
                                    
                                    <div id="backupActions" style="display: none;">
                                        <div class="form-group">
                                            <label>Call Meeting to Order</label>
                                            <button class="btn" onclick="callMeetingToOrder()">Call Meeting to Order</button>
                                        </div>
                                        <div class="form-group">
                                            <label>Assign Acting Chairperson</label>
                                            <select id="actingChairperson">
                                                <!-- Board members will be populated here -->
                                            </select>
                                            <button class="btn" style="margin-top: 10px;" onclick="assignActingChairperson()">Assign</button>
                                        </div>
                                    </div>
                                    
                                    <div id="backupStatus" style="margin-top: 15px; padding: 10px; background: #e8f5e8; border-radius: 8px; display: none;">
                                        <strong>Current Status:</strong> <span id="backupStatusText"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- NEW: Enhanced Floating Chat Widget -->
    <div class="chat-widget">
        <div class="chat-button" id="chatButton">
            <i>üí¨</i>
        </div>
        <div class="chat-window" id="chatWindow">
            <div class="chat-header">
                <h3>Club Communications</h3>
                <button class="close-chat" id="closeChat">‚úï</button>
            </div>
            <div class="chat-content">
                <div class="recipient-selector">
                    <select id="recipientSelect">
                        <option value="">Select option...</option>
                        <option value="registration">Registration Request</option>
                        <option value="handicap">Message Handicap Officer</option>
                        <option value="treasurer">Message Treasurer</option>
                        <option value="secretary">Message Secretary</option>
                        <option value="admin">Message Admin</option>
                    </select>
                </div>
                
                <!-- NEW: Member Selector for Registered Members -->
                <div id="memberSelector" class="member-selector" style="display: none;">
                    <select id="messageMemberSelect">
                        <option value="">Select your name...</option>
                        <!-- Members will be populated here -->
                    </select>
                </div>
                
                <!-- Registration Form -->
                <div id="registrationForm" class="registration-form" style="display: none;">
                    <h4 style="color: #2d5a27; margin-bottom: 15px;">New Member Registration Request</h4>
                    <div class="form-group">
                        <label>Email Address</label>
                        <input type="email" id="regEmail" placeholder="Enter your email">
                    </div>
                    <div class="form-group">
                        <label>First Name</label>
                        <input type="text" id="regFirstName" placeholder="Enter your first name">
                    </div>
                    <div class="form-group">
                        <label>Last Name</label>
                        <input type="text" id="regLastName" placeholder="Enter your last name">
                    </div>
                    <div class="form-group">
                        <label>Phone Number</label>
                        <input type="tel" id="regPhone" placeholder="Enter your phone number">
                    </div>
                    <div class="form-actions">
                        <button class="btn" onclick="submitRegistration()">Submit Registration</button>
                        <button class="btn-secondary" onclick="cancelRegistration()">Cancel</button>
                    </div>
                </div>
                
                <!-- Message Form -->
                <div id="messageForm" style="display: none;">
                    <div class="chat-messages" id="chatMessages">
                        <div class="no-messages">
                            Start a conversation with the selected official
                        </div>
                    </div>
                    <div class="chat-input">
                        <input type="text" id="messageInput" placeholder="Type your message...">
                        <div class="chat-actions">
                            <button class="send-btn" id="sendMessage">Send</button>
                            <button class="cancel-btn" id="cancelMessage">Cancel</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Safari Golf Club Data
        let clubData = {
            members: [
                { id: 1, name: "Sammy", email: "sammy@safarigolf.com", handicap: null, type: "regular", joinDate: "2023-01-15", points: 0, duesStatus: "" },
                { id: 2, name: "Munga", email: "munga@safarigolf.com", handicap: null, type: "regular", joinDate: "2023-02-20", points: 0, duesStatus: "" },
                { id: 3, name: "James Mwangi Gachu", email: "james@safarigolf.com", handicap: null, type: "regular", joinDate: "2023-01-10", points: 0, duesStatus: "" },
                { id: 4, name: "J Kitavi", email: "kitavi@safarigolf.com", handicap: null, type: "associate", joinDate: "2023-03-15", points: 0, duesStatus: "" },
                { id: 5, name: "David Wambua", email: "david@safarigolf.com", handicap: null, type: "associate", joinDate: "2023-02-01", points: 0, duesStatus: "" },
                { id: 6, name: "Simon", email: "simon@safarigolf.com", handicap: null, type: "regular", joinDate: "2023-04-10", points: 0, duesStatus: "" },
                { id: 7, name: "Steve", email: "steve@safarigolf.com", handicap: null, type: "regular", joinDate: "2023-03-20", points: 0, duesStatus: "" },
                { id: 8, name: "Rono", email: "rono@safarigolf.com", handicap: null, type: "associate", joinDate: "2023-05-15", points: 0, duesStatus: "" },
                { id: 9, name: "Ndugu David", email: "ndugu@safarigolf.com", handicap: null, type: "regular", joinDate: "2023-02-28", points: 0, duesStatus: "" },
                { id: 10, name: "Daniel Waithaka", email: "daniel@safarigolf.com", handicap: null, type: "regular", joinDate: "2023-04-05", points: 0, duesStatus: "" },
                { id: 11, name: "Joshua Mwiti", email: "joshua@safarigolf.com", handicap: null, type: "regular", joinDate: "2023-01-25", points: 0, duesStatus: "" },
                { id: 12, name: "James Kavele", email: "kavele@safarigolf.com", handicap: null, type: "associate", joinDate: "2023-03-10", points: 0, duesStatus: "" },
                { id: 13, name: "Mululu", email: "mululu@safarigolf.com", handicap: null, type: "regular", joinDate: "2023-05-01", points: 0, duesStatus: "" },
                { id: 14, name: "Maru", email: "maru@safarigolf.com", handicap: null, type: "associate", joinDate: "2023-04-20", points: 0, duesStatus: "" },
                { id: 15, name: "Matta", email: "matta@safarigolf.com", handicap: null, type: "regular", joinDate: "2023-02-15", points: 0, duesStatus: "" },
                { id: 16, name: "Karongo", email: "karongo@safarigolf.com", handicap: null, type: "associate", joinDate: "2023-05-10", points: 0, duesStatus: "" }
            ],
            games: [
                // Past Games - Updated to show 8 weeks
                { 
                    id: 1, 
                    name: "Week 1", 
                    date: "2025-05-18", 
                    endDate: "2025-05-25",
                    host: "Tournament Committee", 
                    players: ["Sammy", "Munga"],
                    status: "past",
                    results: []
                },
                { 
                    id: 2, 
                    name: "Week 2", 
                    date: "2025-05-25", 
                    endDate: "2025-06-01",
                    host: "Tournament Committee", 
                    players: ["James Mwangi Gachu", "J Kitavi"],
                    status: "past",
                    results: []
                },
                { 
                    id: 3, 
                    name: "Week 3", 
                    date: "2025-06-01", 
                    endDate: "2025-06-08",
                    host: "Tournament Committee", 
                    players: ["David Wambua", "Simon"],
                    status: "past",
                    results: []
                },
                { 
                    id: 4, 
                    name: "Week 4", 
                    date: "2025-06-08", 
                    endDate: "2025-06-15",
                    host: "Tournament Committee", 
                    players: ["Steve", "Rono"],
                    status: "past",
                    results: []
                },
                { 
                    id: 5, 
                    name: "Week 5", 
                    date: "2025-06-15", 
                    endDate: "2025-06-22",
                    host: "Tournament Committee", 
                    players: ["Ndugu David", "Daniel Waithaka"],
                    status: "past",
                    results: []
                },
                { 
                    id: 6, 
                    name: "Week 6", 
                    date: "2025-06-22", 
                    endDate: "2025-06-29",
                    host: "Tournament Committee", 
                    players: ["Joshua Mwiti", "James Kavele"],
                    status: "past",
                    results: []
                },
                { 
                    id: 7, 
                    name: "Week 7", 
                    date: "2025-06-29", 
                    endDate: "2025-07-06",
                    host: "Tournament Committee", 
                    players: ["Mululu", "Maru"],
                    status: "past",
                    results: []
                },
                { 
                    id: 8, 
                    name: "Week 8", 
                    date: "2025-07-06", 
                    endDate: "2025-07-13",
                    host: "Tournament Committee", 
                    players: ["Matta", "Karongo"],
                    status: "past",
                    results: []
                }
            ],
            events: [],
            news: [
                { 
                    id: 1, 
                    title: "üéâ May Tournament Success & Champion Celebration", 
                    content: "Congratulations to our May Champion and to everyone who participated in the tournament. The event was both challenging and highly successful. Special thanks to @+1 (415) 937-2504 for being an excellent host.", 
                    date: "2024-05-20" 
                }
            ],
            contacts: [
                {
                    id: 1,
                    type: "email",
                    title: "Email Support",
                    details: "support@safarigolfclub.com",
                    description: "We typically respond within 24 hours"
                }
            ],
            irregularities: [],
            scoreRecords: [],
            pointsBackup: null,
            transactions: [],
            meetings: [
                { 
                    id: 1, 
                    title: "Annual General Meeting 2025", 
                    date: "2025-03-15", 
                    time: "18:00",
                    location: "Clubhouse", 
                    agenda: "1. Review of 2024 activities\n2. Financial report\n3. Election of officers\n4. Planning for 2025 season",
                    minutes: "",
                    attachments: []
                }
            ],
            notices: [
                {
                    id: 1,
                    title: "Upcoming Annual General Meeting",
                    content: "Please be advised that our Annual General Meeting will be held on March 15, 2025 at the Clubhouse. All members are encouraged to attend.",
                    recipients: "all",
                    date: "2025-02-28"
                }
            ],
            leadershipStatus: {
                chairman: "present",
                actingChairperson: null,
                meetingCalledToOrder: false
            },
            // NEW: Official inboxes
            officialInboxes: {
                admin: [],
                handicap: [],
                treasurer: [],
                secretary: []
            }
        };

        // Admin credentials
        let ADMIN_PASSWORD = "12345six7";
        let HANDICAP_OFFICER_PASSWORD = "254254";
        let TREASURER_PASSWORD = "170739";
        let SECRETARY_PASSWORD = "38326";
        
        // Initialize the application
        function initializeData() {
            const saved = localStorage.getItem('safariGolfClubData');
            if (saved) {
                clubData = JSON.parse(saved);
            }
            
            // Initial render calls
            generateGameSchedule();
            updateDashboard();
            renderGames();
            renderEvents();
            renderNews();
            updateMembershipStats();
            renderContacts();
            renderContactSupport();
            
            // Initialize chat widget
            initializeChatWidget();
            
            // NEW: Render official inboxes
            renderOfficialInboxes();
            
            // NEW: Populate member dropdowns
            populateMemberDropdowns();
        }

        // Save data to localStorage
        function saveData() {
            localStorage.setItem('safariGolfClubData', JSON.stringify(clubData));
            updateMembershipStats();
        }

        // NEW: Populate all member dropdowns
        function populateMemberDropdowns() {
            const memberDropdowns = [
                'pointsMemberSelect', 'handicapMemberSelect', 'quickPointsMemberSelect', 
                'irregularityMemberSelect', 'resetMemberSelect', 'scorePlayer', 
                'scoreOpponent', 'gamePlayer1', 'gamePlayer2', 'transactionMember'
            ];
            
            memberDropdowns.forEach(dropdownId => {
                const dropdown = document.getElementById(dropdownId);
                if (dropdown) {
                    dropdown.innerHTML = '<option value="">Select a member...</option>';
                    clubData.members.forEach(member => {
                        dropdown.innerHTML += `<option value="${member.id}">${member.name}</option>`;
                    });
                }
            });
        }

        // NEW: Render official inboxes for each role with delete functionality
        function renderOfficialInboxes() {
            renderOfficialInbox('admin');
            renderOfficialInbox('handicap');
            renderOfficialInbox('treasurer');
            renderOfficialInbox('secretary');
        }
        
        function renderOfficialInbox(role) {
            const inboxElement = document.getElementById(role + 'Inbox');
            if (!inboxElement) return;
            
            const inboxMessages = clubData.officialInboxes[role];
            
            if (inboxMessages.length === 0) {
                inboxElement.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #666;">
                        <p>No messages in your inbox.</p>
                    </div>
                `;
                return;
            }
            
            inboxElement.innerHTML = `
                <div class="inbox-delete-controls">
                    <div>
                        <input type="checkbox" id="selectAll_${role}" class="inbox-checkbox" onchange="toggleSelectAll('${role}')">
                        <label for="selectAll_${role}">Select All</label>
                    </div>
                    <button class="bulk-delete-btn" id="bulkDelete_${role}" onclick="deleteSelectedMessages('${role}')" disabled>Delete Selected</button>
                </div>
                ${inboxMessages.map((message, index) => `
                    <div class="inbox-message ${message.read ? '' : 'unread'}" id="message_${role}_${index}">
                        <input type="checkbox" class="inbox-checkbox message-checkbox" data-role="${role}" data-index="${index}" onchange="updateBulkDeleteButton('${role}')">
                        <div class="message-meta">
                            <div><strong>From:</strong> ${message.sender}</div>
                            <div>${formatDate(message.timestamp)}</div>
                        </div>
                        <div class="message-content">
                            ${message.content}
                        </div>
                        <div class="message-actions">
                            <button class="edit-contact-btn" onclick="markMessageAsRead('${role}', ${index})">Mark as Read</button>
                            <button class="btn-danger" onclick="deleteMessage('${role}', ${index})">Delete</button>
                        </div>
                    </div>
                `).join('')}
            `;
        }
        
        // NEW: Toggle select all messages
        function toggleSelectAll(role) {
            const selectAll = document.getElementById(`selectAll_${role}`);
            const checkboxes = document.querySelectorAll(`#${role}Inbox .message-checkbox`);
            
            checkboxes.forEach(checkbox => {
                checkbox.checked = selectAll.checked;
                const messageElement = checkbox.closest('.inbox-message');
                if (selectAll.checked) {
                    messageElement.classList.add('selected');
                } else {
                    messageElement.classList.remove('selected');
                }
            });
            
            updateBulkDeleteButton(role);
        }
        
        // NEW: Update bulk delete button state
        function updateBulkDeleteButton(role) {
            const checkboxes = document.querySelectorAll(`#${role}Inbox .message-checkbox`);
            const bulkDeleteBtn = document.getElementById(`bulkDelete_${role}`);
            const anyChecked = Array.from(checkboxes).some(cb => cb.checked);
            
            bulkDeleteBtn.disabled = !anyChecked;
            
            // Update individual message selection styling
            checkboxes.forEach(checkbox => {
                const messageElement = checkbox.closest('.inbox-message');
                if (checkbox.checked) {
                    messageElement.classList.add('selected');
                } else {
                    messageElement.classList.remove('selected');
                }
            });
        }
        
        // NEW: Delete selected messages
        function deleteSelectedMessages(role) {
            const checkboxes = document.querySelectorAll(`#${role}Inbox .message-checkbox:checked`);
            const indicesToDelete = Array.from(checkboxes).map(cb => parseInt(cb.dataset.index)).sort((a, b) => b - a);
            
            if (indicesToDelete.length === 0) return;
            
            if (confirm(`Are you sure you want to delete ${indicesToDelete.length} message(s)?`)) {
                indicesToDelete.forEach(index => {
                    clubData.officialInboxes[role].splice(index, 1);
                });
                saveData();
                renderOfficialInbox(role);
            }
        }
        
        // NEW: Mark message as read
        function markMessageAsRead(role, index) {
            clubData.officialInboxes[role][index].read = true;
            saveData();
            renderOfficialInbox(role);
        }
        
        // NEW: Delete message
        function deleteMessage(role, index) {
            if (confirm('Are you sure you want to delete this message?')) {
                clubData.officialInboxes[role].splice(index, 1);
                saveData();
                renderOfficialInbox(role);
            }
        }
        
        // NEW: Submit registration request
        function submitRegistration() {
            const email = document.getElementById('regEmail').value;
            const firstName = document.getElementById('regFirstName').value;
            const lastName = document.getElementById('regLastName').value;
            const phone = document.getElementById('regPhone').value;
            
            if (!email || !firstName || !lastName || !phone) {
                alert('Please fill in all registration fields.');
                return;
            }
            
            // Create registration message
            const registrationMessage = {
                id: Date.now(),
                type: 'registration',
                sender: `${firstName} ${lastName}`,
                email: email,
                phone: phone,
                content: `New registration request from ${firstName} ${lastName} (${email}, ${phone})`,
                timestamp: new Date().toISOString(),
                read: false
            };
            
            // Send to Secretary and Admin
            clubData.officialInboxes.secretary.unshift(registrationMessage);
            clubData.officialInboxes.admin.unshift(registrationMessage);
            
            saveData();
            closeChat();
            alert('Registration request submitted successfully! The Secretary and Admin will contact you soon.');
        }
        
        // NEW: Reset handicap to zero
        function resetHandicapToZero() {
            const memberId = parseInt(document.getElementById('handicapMemberSelect').value);
            const member = clubData.members.find(m => m.id === memberId);
            
            if (member && confirm(`Are you sure you want to reset ${member.name}'s handicap to zero?`)) {
                member.handicap = 0;
                saveData();
                alert(`${member.name}'s handicap has been reset to zero.`);
            }
        }
        
        // NEW: Reset recent irregularities
        function resetRecentIrregularities() {
            if (confirm('Are you sure you want to clear all recent irregularities?')) {
                clubData.irregularities = [];
                saveData();
                alert('All recent irregularities have been cleared.');
            }
        }
        
        // NEW: Handicap Officer posting
        function saveHandicapNews() {
            const title = document.getElementById('handicapNewsTitle').value;
            const content = document.getElementById('handicapNewsContent').value;
            
            if (title && content) {
                const newNews = {
                    id: clubData.news.length + 1,
                    title: title,
                    content: content,
                    date: new Date().toISOString().split('T')[0],
                    postedBy: 'Handicap Officer'
                };
                
                clubData.news.unshift(newNews);
                saveData();
                renderNews();
                resetHandicapNewsForm();
                alert('News posted successfully!');
            } else {
                alert('Please fill in all fields.');
            }
        }
        
        function resetHandicapNewsForm() {
            document.getElementById('handicapNewsTitle').value = '';
            document.getElementById('handicapNewsContent').value = '';
        }
        
        // NEW: Treasurer posting
        function saveTreasurerNews() {
            const title = document.getElementById('treasurerNewsTitle').value;
            const content = document.getElementById('treasurerNewsContent').value;
            
            if (title && content) {
                const newNews = {
                    id: clubData.news.length + 1,
                    title: title,
                    content: content,
                    date: new Date().toISOString().split('T')[0],
                    postedBy: 'Treasurer'
                };
                
                clubData.news.unshift(newNews);
                saveData();
                renderNews();
                resetTreasurerNewsForm();
                alert('Financial update posted successfully!');
            } else {
                alert('Please fill in all fields.');
            }
        }
        
        function resetTreasurerNewsForm() {
            document.getElementById('treasurerNewsTitle').value = '';
            document.getElementById('treasurerNewsContent').value = '';
        }
        
        // NEW: Enhanced chat widget for registration and messaging
        function initializeChatWidget() {
            // Set up event listeners
            document.getElementById('chatButton').addEventListener('click', toggleChat);
            document.getElementById('closeChat').addEventListener('click', closeChat);
            document.getElementById('recipientSelect').addEventListener('change', handleRecipientChange);
            document.getElementById('sendMessage').addEventListener('click', sendMessage);
            document.getElementById('cancelMessage').addEventListener('click', cancelMessage);
            document.getElementById('messageInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });
            
            // Populate member selector
            populateMemberSelector();
        }
        
        // Populate member selector dropdown
        function populateMemberSelector() {
            const memberSelect = document.getElementById('messageMemberSelect');
            if (!memberSelect) return;
            
            memberSelect.innerHTML = '<option value="">Select your name...</option>';
            clubData.members.forEach(member => {
                memberSelect.innerHTML += `<option value="${member.id}">${member.name}</option>`;
            });
        }
        
        // Toggle chat window
        function toggleChat() {
            const chatWindow = document.getElementById('chatWindow');
            chatWindow.classList.toggle('active');
        }
        
        // Close chat window
        function closeChat() {
            document.getElementById('chatWindow').classList.remove('active');
            resetChat();
        }
        
        // Enhanced recipient change handler
        function handleRecipientChange() {
            const recipient = document.getElementById('recipientSelect').value;
            const registrationForm = document.getElementById('registrationForm');
            const messageForm = document.getElementById('messageForm');
            const memberSelector = document.getElementById('memberSelector');
            
            if (recipient === 'registration') {
                registrationForm.style.display = 'block';
                messageForm.style.display = 'none';
                memberSelector.style.display = 'none';
                resetRegistrationForm();
            } else if (recipient) {
                registrationForm.style.display = 'none';
                messageForm.style.display = 'block';
                memberSelector.style.display = 'block';
                document.getElementById('messageInput').disabled = false;
                document.getElementById('sendMessage').disabled = false;
            } else {
                registrationForm.style.display = 'none';
                messageForm.style.display = 'none';
                memberSelector.style.display = 'none';
                resetChat();
            }
        }
        
        // Reset registration form
        function resetRegistrationForm() {
            document.getElementById('regEmail').value = '';
            document.getElementById('regFirstName').value = '';
            document.getElementById('regLastName').value = '';
            document.getElementById('regPhone').value = '';
        }
        
        // Cancel registration
        function cancelRegistration() {
            document.getElementById('recipientSelect').value = '';
            document.getElementById('registrationForm').style.display = 'none';
        }
        
        // Enhanced send message function
        function sendMessage() {
            const messageInput = document.getElementById('messageInput');
            const text = messageInput.value.trim();
            const recipient = document.getElementById('recipientSelect').value;
            const memberId = document.getElementById('messageMemberSelect').value;
            
            if (!text || !recipient) {
                return;
            }
            
            // Check if member is selected for non-registration messages
            if (recipient !== 'registration' && !memberId) {
                alert('Please select your name from the dropdown list.');
                return;
            }
            
            // Get member name
            const member = clubData.members.find(m => m.id == memberId);
            const senderName = member ? member.name : 'Unknown Member';
            
            // Create message object
            const message = {
                id: Date.now(),
                type: 'message',
                sender: senderName,
                content: text,
                timestamp: new Date().toISOString(),
                read: false
            };
            
            // Add to official inbox
            clubData.officialInboxes[recipient].unshift(message);
            
            // Save data
            saveData();
            
            // Clear input
            messageInput.value = '';
            
            // Close chat
            closeChat();
            
            alert('Message sent successfully!');
        }
        
        // Cancel message
        function cancelMessage() {
            document.getElementById('messageInput').value = '';
            resetChat();
        }
        
        // Reset chat to initial state
        function resetChat() {
            document.getElementById('recipientSelect').value = '';
            document.getElementById('messageInput').value = '';
            document.getElementById('messageInput').disabled = true;
            document.getElementById('sendMessage').disabled = true;
            document.getElementById('registrationForm').style.display = 'none';
            document.getElementById('messageForm').style.display = 'none';
            document.getElementById('memberSelector').style.display = 'none';
        }

        // Basic UI functions
        function toggleStats() {
            const panel = document.getElementById('statsPanel');
            panel.classList.toggle('active');
        }

        function closeStats() {
            const panel = document.getElementById('statsPanel');
            panel.classList.remove('active');
        }

        function showStatsContent(contentType) {
            // Update buttons
            document.querySelectorAll('.stats-nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Update content
            document.querySelectorAll('.stats-content').forEach(content => {
                content.classList.remove('active');
            });
            
            if (contentType === 'contact') {
                renderContactSupport();
            }
            
            document.getElementById(contentType + 'Content').classList.add('active');
        }

        function switchTab(tabName) {
            // Update tab UI
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        function showSchedulePanel(panelType) {
            // Update buttons
            document.querySelectorAll('.schedule-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Update panels
            document.querySelectorAll('.schedule-panel').forEach(panel => {
                panel.classList.remove('active');
            });
            document.getElementById(panelType + 'Schedule').classList.add('active');
        }

        // Format date helper function
        function formatDate(dateString) {
            if (!dateString) return 'TBC';
            const date = new Date(dateString);
            return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
        }

        // Basic rendering functions
        function generateGameSchedule() {
            const upcomingGames = clubData.games.filter(game => game.status === 'upcoming');
            const pastGames = clubData.games.filter(game => game.status === 'past');
            
            // Upcoming games
            if (upcomingGames.length === 0) {
                document.getElementById('upcomingSchedule').innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #666;">
                        <p>No upcoming games scheduled.</p>
                        <p>Add games in the Admin section to see them here.</p>
                    </div>
                `;
            } else {
                document.getElementById('upcomingSchedule').innerHTML = upcomingGames.map(game => `
                    <div class="schedule-week">
                        <div class="week-header">
                            <div class="week-title">${game.name} <span class="upcoming-badge">Upcoming</span></div>
                            <div class="week-dates">${formatDate(game.date)} - ${formatDate(game.endDate)}</div>
                        </div>
                        <div class="players-list">
                            ${game.players.map(player => `<div class="player">${player}</div>`).join('')}
                        </div>
                        <div style="margin-top: 12px; font-size: 0.95em; color: #666;">
                            <strong>Hosts:</strong> ${game.host}
                        </div>
                    </div>
                `).join('');
            }
            
            // Past games
            document.getElementById('pastSchedule').innerHTML = pastGames.map(game => `
                <div class="schedule-week">
                    <div class="week-header">
                        <div class="week-title">${game.name} <span class="past-badge">Completed</span></div>
                        <div class="week-dates">${formatDate(game.date)} - ${formatDate(game.endDate)}</div>
                    </div>
                    <div class="players-list">
                        ${game.players.map(player => `<div class="player">${player}</div>`).join('')}
                    </div>
                    <div style="margin-top: 12px; font-size: 0.95em; color: #666;">
                        <strong>Hosts:</strong> ${game.host}
                    </div>
                </div>
            `).join('');
        }

        function updateDashboard() {
            // Top rankings by handicap (only show members with handicaps)
            const membersWithHandicaps = clubData.members.filter(member => member.handicap !== null);
            const topMembers = [...membersWithHandicaps].sort((a, b) => a.handicap - b.handicap).slice(0, 5);
            
            if (topMembers.length > 0) {
                document.getElementById('topRankings').innerHTML = topMembers.map((member, index) => `
                    <div class="ranking-item ${index < 3 ? 'top-3' : ''}">
                        <div class="ranking-position">${index + 1}.</div>
                        <div class="ranking-name">${member.name}</div>
                        <div class="ranking-handicap">${member.handicap}</div>
                    </div>
                `).join('');
            } else {
                document.getElementById('topRankings').innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #666;">
                        <p>No handicap data available yet.</p>
                        <p>Add handicaps in the Members section to see rankings.</p>
                    </div>
                `;
            }
        }

        // FIXED: Render games with proper display logic
        function renderGames() {
            const upcomingGames = clubData.games.filter(g => g.status === 'upcoming' && g.date !== null);
            
            if (upcomingGames.length === 0) {
                document.getElementById('upcomingGamesList').innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #666;">
                        <p>No upcoming games scheduled.</p>
                        <p>Add games in the Admin section to see them here.</p>
                    </div>
                `;
            } else {
                document.getElementById('upcomingGamesList').innerHTML = upcomingGames.map(game => `
                    <div class="event-item">
                        <div class="event-header">
                            <div class="event-title">${game.name}</div>
                            <div class="event-date">${formatDate(game.date)} - ${formatDate(game.endDate)}</div>
                        </div>
                        <div style="margin-bottom: 10px;">
                            <strong>Host:</strong> ${game.host}
                        </div>
                        <div style="margin-bottom: 10px;">
                            <strong>Players:</strong> ${game.players.join(' vs ')}
                        </div>
                        <div>
                            <strong>Description:</strong> ${game.description || 'No description provided'}
                        </div>
                    </div>
                `).join('');
            }
        }

        function renderEvents() {
            const upcomingEvents = clubData.events.filter(event => event.status === 'upcoming');
            if (upcomingEvents.length === 0) {
                document.getElementById('eventsList').innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #666;">
                        <p>No upcoming events scheduled.</p>
                        <p>Add events in the Admin section to see them here.</p>
                    </div>
                `;
            } else {
                document.getElementById('eventsList').innerHTML = upcomingEvents.map(event => `
                    <div class="event-item">
                        <div class="event-header">
                            <div class="event-title">${event.name}</div>
                            <div class="event-date">${formatDate(event.date)}</div>
                        </div>
                        <div style="margin-bottom: 10px;">
                            <strong>Type:</strong> ${event.type.charAt(0).toUpperCase() + event.type.slice(1)}
                        </div>
                        <div style="margin-bottom: 10px;">
                            <strong>Location:</strong> ${event.location}
                        </div>
                        <div>
                            <strong>Description:</strong> ${event.description}
                        </div>
                    </div>
                `).join('');
            }
        }

        // FIXED: Render news with proper data
        function renderNews() {
            if (clubData.news.length === 0) {
                document.getElementById('newsFeed').innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #666;">
                        <p>No news items available yet.</p>
                        <p>Add news in the Admin section to see them here.</p>
                    </div>
                `;
            } else {
                document.getElementById('newsFeed').innerHTML = clubData.news.map(news => `
                    <div class="card">
                        <div style="color: #666; font-size: 0.9em; margin-bottom: 10px;">
                            ${new Date(news.date).toLocaleDateString()} 
                            ${news.postedBy ? `<span class="post-label ${news.postedBy.toLowerCase().replace(' ', '-')}-label">${news.postedBy}</span>` : ''}
                        </div>
                        <h4 style="color: #2d5a27; margin-bottom: 15px;">${news.title}</h4>
                        <p style="line-height: 1.6; white-space: pre-line;">${news.content}</p>
                    </div>
                `).join('');
            }
        }

        function updateMembershipStats() {
            const regular = clubData.members.filter(m => m.type === 'regular').length;
            const associate = clubData.members.filter(m => m.type === 'associate').length;
            const junior = clubData.members.filter(m => m.type === 'junior').length;
            const social = clubData.members.filter(m => m.type === 'social').length;
            
            document.getElementById('regularCount').textContent = regular;
            document.getElementById('associateCount').textContent = associate;
            document.getElementById('juniorCount').textContent = junior;
            document.getElementById('socialCount').textContent = social;
        }

        // FIXED: Render contacts with proper functionality
        function renderContacts() {
            const contactsList = document.getElementById('contactsList');
            if (clubData.contacts.length === 0) {
                contactsList.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #666;">
                        <p>No contacts available.</p>
                        <p>Add contacts using the form above.</p>
                    </div>
                `;
            } else {
                contactsList.innerHTML = clubData.contacts.map(contact => `
                    <div class="contact-edit-form">
                        <div class="form-group">
                            <label>Contact Type</label>
                            <select id="contactType_${contact.id}">
                                <option value="email" ${contact.type === 'email' ? 'selected' : ''}>Email Support</option>
                                <option value="phone" ${contact.type === 'phone' ? 'selected' : ''}>Phone Support</option>
                                <option value="chairman" ${contact.type === 'chairman' ? 'selected' : ''}>Club Chairman</option>
                                <option value="treasurer" ${contact.type === 'treasurer' ? 'selected' : ''}>Treasurer</option>
                                <option value="handicap" ${contact.type === 'handicap' ? 'selected' : ''}>Handicap Officer</option>
                                <option value="other" ${contact.type === 'other' ? 'selected' : ''}>Other</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Title/Name</label>
                            <input type="text" id="contactTitle_${contact.id}" value="${contact.title}">
                        </div>
                        <div class="form-group">
                            <label>Contact Details</label>
                            <input type="text" id="contactDetails_${contact.id}" value="${contact.details}">
                        </div>
                        <div class="form-group">
                            <label>Description</label>
                            <input type="text" id="contactDescription_${contact.id}" value="${contact.description}">
                        </div>
                        <div class="contact-edit-actions">
                            <button class="edit-contact-btn" onclick="updateContact(${contact.id})">Save</button>
                            <button class="btn-danger" onclick="deleteContact(${contact.id})">Delete</button>
                        </div>
                    </div>
                `).join('');
            }
        }

        function renderContactSupport() {
            const contactContent = document.getElementById('contactContent');
            if (contactContent) {
                contactContent.innerHTML = `
                    <div class="bylaws-container">
                        <h2 style="color: #2d5a27; margin-bottom: 25px; text-align: center;">Contact Support</h2>
                        
                        <div class="contact-info">
                            ${clubData.contacts.map(contact => `
                                <div class="contact-item">
                                    <div class="contact-icon">${getContactIcon(contact.type)}</div>
                                    <div class="contact-details">
                                        <h4>${contact.title}</h4>
                                        <p>${contact.details}</p>
                                        <p>${contact.description}</p>
                                    </div>
                                </div>
                            `).join('')}
                            
                            <div class="contact-item">
                                <div class="contact-icon">üö®</div>
                                <div class="contact-details">
                                    <h4>Emergency Contact</h4>
                                    <p>For urgent matters outside business hours, please text (555) 987-6543 and we will respond as soon as possible.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }
        }

        function getContactIcon(type) {
            switch(type) {
                case 'email': return 'üìß';
                case 'phone': return 'üìû';
                case 'chairman': return 'üë§';
                case 'treasurer': return 'üí∞';
                case 'handicap': return 'üèåÔ∏è';
                default: return 'üìã';
            }
        }

        // Authentication functions
        function authenticateAdmin() {
            const password = document.getElementById('adminPassword').value;
            if (password === ADMIN_PASSWORD) {
                document.getElementById('adminLogin').style.display = 'none';
                document.getElementById('adminContent').style.display = 'block';
                renderAdminContent();
            } else {
                document.getElementById('loginError').style.display = 'block';
            }
        }

        function authenticateHandicapOfficer() {
            const password = document.getElementById('handicapPassword').value;
            if (password === HANDICAP_OFFICER_PASSWORD) {
                document.getElementById('handicapLogin').style.display = 'none';
                document.getElementById('handicapContent').style.display = 'block';
                renderHandicapContent();
            } else {
                document.getElementById('handicapLoginError').style.display = 'block';
            }
        }

        function authenticateTreasurer() {
            const password = document.getElementById('treasurerPassword').value;
            if (password === TREASURER_PASSWORD) {
                document.getElementById('treasurerLogin').style.display = 'none';
                document.getElementById('treasurerContent').style.display = 'block';
                renderTreasurerContent();
            } else {
                document.getElementById('treasurerLoginError').style.display = 'block';
            }
        }

        function authenticateSecretary() {
            const password = document.getElementById('secretaryPassword').value;
            if (password === SECRETARY_PASSWORD) {
                document.getElementById('secretaryLogin').style.display = 'none';
                document.getElementById('secretaryContent').style.display = 'block';
                renderSecretaryContent();
            } else {
                document.getElementById('secretaryLoginError').style.display = 'block';
            }
        }

        // FIXED: Admin content rendering
        function renderAdminContent() {
            renderNewsAdmin();
            renderGamesAdmin();
            renderEventsAdmin();
            renderMembersAdmin();
            renderContacts();
        }

        // FIXED: News Management
        function showNewsForm() {
            document.getElementById('newsForm').style.display = 'block';
            document.getElementById('newsFormTitle').textContent = 'Create News Post';
            document.getElementById('newsSaveBtn').textContent = 'Post News';
            document.getElementById('newsDeleteBtn').style.display = 'none';
            document.getElementById('newsTitle').value = '';
            document.getElementById('newsContent').value = '';
        }

        function hideNewsForm() {
            document.getElementById('newsForm').style.display = 'none';
        }

        function saveNews() {
            const title = document.getElementById('newsTitle').value;
            const content = document.getElementById('newsContent').value;
            
            if (title && content) {
                const newNews = {
                    id: clubData.news.length + 1,
                    title: title,
                    content: content,
                    date: new Date().toISOString().split('T')[0]
                };
                
                clubData.news.unshift(newNews);
                saveData();
                renderNews();
                renderNewsAdmin();
                hideNewsForm();
                alert('News posted successfully!');
            } else {
                alert('Please fill in all fields.');
            }
        }

        function renderNewsAdmin() {
            const newsListAdmin = document.getElementById('newsListAdmin');
            if (clubData.news.length === 0) {
                newsListAdmin.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #666;">
                        <p>No news items available.</p>
                        <p>Create your first news post using the form above.</p>
                    </div>
                `;
            } else {
                newsListAdmin.innerHTML = clubData.news.map(news => `
                    <div class="event-item">
                        <div class="event-header">
                            <div class="event-title">${news.title}</div>
                            <div class="event-date">${formatDate(news.date)}</div>
                        </div>
                        <p style="margin-bottom: 10px;">${news.content.substring(0, 100)}...</p>
                        <div class="game-actions">
                            <button class="edit-game-btn" onclick="editNews(${news.id})">Edit</button>
                            <button class="btn-danger" onclick="deleteNewsItem(${news.id})">Delete</button>
                        </div>
                    </div>
                `).join('');
            }
        }

        function editNews(id) {
            const newsItem = clubData.news.find(n => n.id === id);
            if (newsItem) {
                document.getElementById('newsForm').style.display = 'block';
                document.getElementById('newsFormTitle').textContent = 'Edit News Post';
                document.getElementById('newsSaveBtn').textContent = 'Update News';
                document.getElementById('newsDeleteBtn').style.display = 'inline-block';
                document.getElementById('newsTitle').value = newsItem.title;
                document.getElementById('newsContent').value = newsItem.content;
                
                // Store the ID for updating
                document.getElementById('newsSaveBtn').setAttribute('data-id', id);
                document.getElementById('newsDeleteBtn').setAttribute('data-id', id);
            }
        }

        function deleteNewsItem(id) {
            if (confirm('Are you sure you want to delete this news item?')) {
                clubData.news = clubData.news.filter(n => n.id !== id);
                saveData();
                renderNews();
                renderNewsAdmin();
                hideNewsForm();
                alert('News item deleted successfully!');
            }
        }

        // FIXED: Game Management
        function showGameForm() {
            document.getElementById('gameForm').style.display = 'block';
            populateMemberDropdowns();
        }

        function hideGameForm() {
            document.getElementById('gameForm').style.display = 'none';
        }

        function saveGame() {
            const name = document.getElementById('gameName').value;
            const date = document.getElementById('gameDate').value;
            const host = document.getElementById('gameHost').value;
            const description = document.getElementById('gameDescription').value;
            const player1Id = document.getElementById('gamePlayer1').value;
            const player2Id = document.getElementById('gamePlayer2').value;
            
            if (!name || !date || !host) {
                alert('Please fill in all required fields.');
                return;
            }
            
            const player1 = clubData.members.find(m => m.id == player1Id);
            const player2 = clubData.members.find(m => m.id == player2Id);
            
            const newGame = {
                id: clubData.games.length + 1,
                name: name,
                date: date,
                endDate: new Date(new Date(date).getTime() + 7 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
                host: host,
                description: description,
                players: [player1 ? player1.name : 'TBD', player2 ? player2.name : 'TBD'],
                status: 'upcoming',
                results: []
            };
            
            clubData.games.push(newGame);
            saveData();
            renderGames();
            renderGamesAdmin();
            hideGameForm();
            alert('Game scheduled successfully!');
        }

        function renderGamesAdmin() {
            const upcomingGamesAdmin = document.getElementById('upcomingGamesAdmin');
            const upcomingGames = clubData.games.filter(g => g.status === 'upcoming');
            
            if (upcomingGames.length === 0) {
                upcomingGamesAdmin.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #666;">
                        <p>No upcoming games scheduled.</p>
                        <p>Schedule a game using the form above.</p>
                    </div>
                `;
            } else {
                upcomingGamesAdmin.innerHTML = upcomingGames.map(game => `
                    <div class="game-item">
                        <div class="game-header">
                            <div class="game-title">${game.name}</div>
                            <div class="game-date">${formatDate(game.date)}</div>
                        </div>
                        <div style="margin-bottom: 10px;">
                            <strong>Players:</strong> ${game.players.join(' vs ')}
                        </div>
                        <div class="game-actions">
                            <button class="edit-game-btn" onclick="editGame(${game.id})">Edit</button>
                            <button class="btn-danger" onclick="deleteGame(${game.id})">Delete</button>
                        </div>
                    </div>
                `).join('');
            }
        }

        function deleteGame(id) {
            if (confirm('Are you sure you want to delete this game?')) {
                clubData.games = clubData.games.filter(g => g.id !== id);
                saveData();
                renderGames();
                renderGamesAdmin();
                alert('Game deleted successfully!');
            }
        }

        // FIXED: Event Management
        function showEventForm() {
            document.getElementById('eventForm').style.display = 'block';
        }

        function hideEventForm() {
            document.getElementById('eventForm').style.display = 'none';
        }

        function saveEvent() {
            const name = document.getElementById('eventName').value;
            const date = document.getElementById('eventDate').value;
            const type = document.getElementById('eventType').value;
            const location = document.getElementById('eventLocation').value;
            const description = document.getElementById('eventDescription').value;
            
            if (!name || !date || !location) {
                alert('Please fill in all required fields.');
                return;
            }
            
            const newEvent = {
                id: clubData.events.length + 1,
                name: name,
                date: date,
                type: type,
                location: location,
                description: description,
                status: 'upcoming'
            };
            
            clubData.events.push(newEvent);
            saveData();
            renderEvents();
            renderEventsAdmin();
            hideEventForm();
            alert('Event added successfully!');
        }

        function renderEventsAdmin() {
            const eventsListAdmin = document.getElementById('eventsListAdmin');
            const upcomingEvents = clubData.events.filter(e => e.status === 'upcoming');
            
            if (upcomingEvents.length === 0) {
                eventsListAdmin.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #666;">
                        <p>No upcoming events scheduled.</p>
                        <p>Add an event using the form above.</p>
                    </div>
                `;
            } else {
                eventsListAdmin.innerHTML = upcomingEvents.map(event => `
                    <div class="event-item">
                        <div class="event-header">
                            <div class="event-title">${event.name}</div>
                            <div class="event-date">${formatDate(event.date)}</div>
                        </div>
                        <div style="margin-bottom: 10px;">
                            <strong>Type:</strong> ${event.type.charAt(0).toUpperCase() + event.type.slice(1)}
                        </div>
                        <div style="margin-bottom: 10px;">
                            <strong>Location:</strong> ${event.location}
                        </div>
                        <div class="game-actions">
                            <button class="edit-game-btn" onclick="editEvent(${event.id})">Edit</button>
                            <button class="btn-danger" onclick="deleteEvent(${event.id})">Delete</button>
                        </div>
                    </div>
                `).join('');
            }
        }

        function deleteEvent(id) {
            if (confirm('Are you sure you want to delete this event?')) {
                clubData.events = clubData.events.filter(e => e.id !== id);
                saveData();
                renderEvents();
                renderEventsAdmin();
                alert('Event deleted successfully!');
            }
        }

        // FIXED: Contact Management
        function showContactForm() {
            document.getElementById('contactForm').style.display = 'block';
        }

        function hideContactForm() {
            document.getElementById('contactForm').style.display = 'none';
        }

        function saveContact() {
            const type = document.getElementById('contactType').value;
            const title = document.getElementById('contactTitle').value;
            const details = document.getElementById('contactDetails').value;
            const description = document.getElementById('contactDescription').value;
            
            if (!type || !title || !details) {
                alert('Please fill in all required fields.');
                return;
            }
            
            const newContact = {
                id: clubData.contacts.length + 1,
                type: type,
                title: title,
                details: details,
                description: description
            };
            
            clubData.contacts.push(newContact);
            saveData();
            renderContacts();
            renderContactSupport();
            hideContactForm();
            alert('Contact added successfully!');
        }

        function updateContact(id) {
            const type = document.getElementById(`contactType_${id}`).value;
            const title = document.getElementById(`contactTitle_${id}`).value;
            const details = document.getElementById(`contactDetails_${id}`).value;
            const description = document.getElementById(`contactDescription_${id}`).value;
            
            const contact = clubData.contacts.find(c => c.id === id);
            if (contact) {
                contact.type = type;
                contact.title = title;
                contact.details = details;
                contact.description = description;
                saveData();
                renderContacts();
                renderContactSupport();
                alert('Contact updated successfully!');
            }
        }

        function deleteContact(id) {
            if (confirm('Are you sure you want to delete this contact?')) {
                clubData.contacts = clubData.contacts.filter(c => c.id !== id);
                saveData();
                renderContacts();
                renderContactSupport();
                alert('Contact deleted successfully!');
            }
        }

        // FIXED: Points Management
        function addPoints() {
            const memberId = parseInt(document.getElementById('pointsMemberSelect').value);
            const points = parseInt(document.getElementById('pointsToAdd').value);
            
            if (!memberId || isNaN(points)) {
                alert('Please select a member and enter valid points.');
                return;
            }
            
            const member = clubData.members.find(m => m.id === memberId);
            if (member) {
                member.points += points;
                saveData();
                alert(`Added ${points} points to ${member.name}. Total points: ${member.points}`);
                document.getElementById('pointsToAdd').value = '';
            }
        }

        // FIXED: Member Management
        function renderMembersAdmin() {
            const membersListAdmin = document.getElementById('membersListAdmin');
            if (clubData.members.length === 0) {
                membersListAdmin.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #666;">
                        <p>No members available.</p>
                        <p>Add members using the form above.</p>
                    </div>
                `;
            } else {
                membersListAdmin.innerHTML = clubData.members.map(member => `
                    <div class="member-item">
                        <div class="member-info">
                            <strong>${member.name}</strong> (${member.type}) - ${member.email}
                        </div>
                        <div class="member-details">
                            <div>Handicap: ${member.handicap !== null ? member.handicap : 'Not set'}</div>
                            <div>Points: ${member.points}</div>
                        </div>
                        <div class="member-actions">
                            <button class="edit-game-btn" onclick="editMember(${member.id})">Edit</button>
                            <button class="btn-danger" onclick="deleteMember(${member.id})">Delete</button>
                        </div>
                    </div>
                `).join('');
            }
        }

        function saveMember() {
            const name = document.getElementById('memberName').value;
            const email = document.getElementById('memberEmail').value;
            const handicap = document.getElementById('memberHandicap').value;
            const type = document.getElementById('memberType').value;
            
            if (!name || !email) {
                alert('Please fill in all required fields.');
                return;
            }
            
            const newMember = {
                id: clubData.members.length + 1,
                name: name,
                email: email,
                handicap: handicap ? parseFloat(handicap) : null,
                type: type,
                joinDate: new Date().toISOString().split('T')[0],
                points: 0,
                duesStatus: ""
            };
            
            clubData.members.push(newMember);
            saveData();
            renderMembersAdmin();
            populateMemberDropdowns();
            resetMemberForm();
            alert('Member added successfully!');
        }

        function resetMemberForm() {
            document.getElementById('memberName').value = '';
            document.getElementById('memberEmail').value = '';
            document.getElementById('memberHandicap').value = '';
            document.getElementById('memberType').value = 'regular';
        }

        function editMember(id) {
            const member = clubData.members.find(m => m.id === id);
            if (member) {
                document.getElementById('memberFormTitle').textContent = 'Edit Member';
                document.getElementById('memberName').value = member.name;
                document.getElementById('memberEmail').value = member.email;
                document.getElementById('memberHandicap').value = member.handicap || '';
                document.getElementById('memberType').value = member.type;
                document.getElementById('memberSaveBtn').textContent = 'Update Member';
                document.getElementById('memberCancelBtn').style.display = 'inline-block';
                
                // Store the ID for updating
                document.getElementById('memberSaveBtn').setAttribute('data-id', id);
            }
        }

        function deleteMember(id) {
            if (confirm('Are you sure you want to delete this member?')) {
                clubData.members = clubData.members.filter(m => m.id !== id);
                saveData();
                renderMembersAdmin();
                populateMemberDropdowns();
                alert('Member deleted successfully!');
            }
        }

        // FIXED: Handicap Officer content rendering
        function renderHandicapContent() {
            populateMemberDropdowns();
            renderHandicapMembersList();
            renderIrregularitiesList();
        }

        // FIXED: Quick Points Management
        function addQuickPoints() {
            const memberId = parseInt(document.getElementById('quickPointsMemberSelect').value);
            const points = parseInt(document.getElementById('quickPointsToAdd').value);
            
            if (!memberId || isNaN(points)) {
                alert('Please select a member and enter valid points.');
                return;
            }
            
            const member = clubData.members.find(m => m.id === memberId);
            if (member) {
                member.points += points;
                saveData();
                alert(`Added ${points} points to ${member.name}. Total points: ${member.points}`);
                document.getElementById('quickPointsToAdd').value = '';
            }
        }

        // FIXED: Reset Specific Member Points
        function resetMemberPoints() {
            const memberId = parseInt(document.getElementById('resetMemberSelect').value);
            const member = clubData.members.find(m => m.id === memberId);
            
            if (member && confirm(`Are you sure you want to reset ${member.name}'s points to zero?`)) {
                member.points = 0;
                saveData();
                alert(`${member.name}'s points have been reset to zero.`);
            }
        }

        // FIXED: Record Golf Score
        function recordScore() {
            const date = document.getElementById('scoreDate').value;
            const playerId = parseInt(document.getElementById('scorePlayer').value);
            const opponentId = parseInt(document.getElementById('scoreOpponent').value);
            const handicapType = document.getElementById('scoreHandicapType').value;
            const score = parseInt(document.getElementById('scoreValue').value);
            const points = parseInt(document.getElementById('scorePoints').value);
            
            if (!date || !playerId || isNaN(score) || isNaN(points)) {
                alert('Please fill in all required fields with valid values.');
                return;
            }
            
            const player = clubData.members.find(m => m.id === playerId);
            const opponent = clubData.members.find(m => m.id === opponentId);
            
            const newScore = {
                id: clubData.scoreRecords.length + 1,
                date: date,
                playerName: player.name,
                opponentName: opponent ? opponent.name : 'N/A',
                handicapType: handicapType,
                score: score,
                points: points
            };
            
            clubData.scoreRecords.push(newScore);
            saveData();
            alert('Score recorded successfully!');
            resetScoreForm();
        }

        function resetScoreForm() {
            document.getElementById('scoreDate').value = '';
            document.getElementById('scorePlayer').value = '';
            document.getElementById('scoreOpponent').value = '';
            document.getElementById('scoreHandicapType').value = 'Handicap Index';
            document.getElementById('scoreValue').value = '';
            document.getElementById('scorePoints').value = '';
        }

        // FIXED: Record Irregularity
        function recordIrregularity() {
            const memberId = parseInt(document.getElementById('irregularityMemberSelect').value);
            const date = document.getElementById('irregularityDate').value;
            const description = document.getElementById('irregularityDescription').value;
            const severity = document.getElementById('irregularitySeverity').value;
            const action = document.getElementById('irregularityAction').value;
            
            if (!memberId || !date || !description) {
                alert('Please fill in all required fields.');
                return;
            }
            
            const member = clubData.members.find(m => m.id === memberId);
            
            const newIrregularity = {
                id: clubData.irregularities.length + 1,
                memberName: member.name,
                date: date,
                description: description,
                severity: severity,
                action: action,
                timestamp: new Date().toISOString()
            };
            
            clubData.irregularities.unshift(newIrregularity);
            saveData();
            renderIrregularitiesList();
            alert('Irregularity recorded successfully!');
            resetIrregularityForm();
        }

        function resetIrregularityForm() {
            document.getElementById('irregularityMemberSelect').value = '';
            document.getElementById('irregularityDate').value = '';
            document.getElementById('irregularityDescription').value = '';
            document.getElementById('irregularitySeverity').value = 'minor';
            document.getElementById('irregularityAction').value = '';
        }

        function renderIrregularitiesList() {
            const irregularitiesList = document.getElementById('irregularitiesList');
            if (clubData.irregularities.length === 0) {
                irregularitiesList.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #666;">
                        <p>No irregularities recorded.</p>
                    </div>
                `;
            } else {
                irregularitiesList.innerHTML = clubData.irregularities.map(irregularity => `
                    <div class="irregularity-item">
                        <div style="font-weight: bold; margin-bottom: 8px;">${irregularity.memberName}</div>
                        <div style="margin-bottom: 8px;">${irregularity.description}</div>
                        <div style="display: flex; justify-content: space-between; font-size: 0.9em; color: #666;">
                            <div>${formatDate(irregularity.date)}</div>
                            <div>${irregularity.severity}</div>
                        </div>
                    </div>
                `).join('');
            }
        }

        // FIXED: Handicap Members List
        function renderHandicapMembersList() {
            const handicapMembersList = document.getElementById('handicapMembersList');
            handicapMembersList.innerHTML = clubData.members.map(member => `
                <div class="member-item">
                    <div class="member-info">
                        <strong>${member.name}</strong> (${member.type})
                    </div>
                    <div class="member-details">
                        <div>Handicap: ${member.handicap !== null ? member.handicap : 'Not set'}</div>
                        <div>Points: ${member.points}</div>
                    </div>
                </div>
            `).join('');
        }

        // FIXED: Points Reset Functions
        function resetAllPoints() {
            if (confirm('Are you sure you want to reset all member points to zero?')) {
                // Backup current points
                clubData.pointsBackup = clubData.members.map(m => ({ id: m.id, points: m.points }));
                
                // Reset all points to zero
                clubData.members.forEach(member => {
                    member.points = 0;
                });
                
                saveData();
                alert('All member points have been reset to zero.');
            }
        }

        function undoReset() {
            if (clubData.pointsBackup) {
                clubData.members.forEach(member => {
                    const backup = clubData.pointsBackup.find(b => b.id === member.id);
                    if (backup) {
                        member.points = backup.points;
                    }
                });
                
                saveData();
                alert('Points have been restored to their previous values.');
            } else {
                alert('No backup found to restore from.');
            }
        }

        // FIXED: Treasurer content rendering
        function renderTreasurerContent() {
            populateMemberDropdowns();
            renderFinancialOverview();
            renderTransactions();
        }

        // FIXED: Financial Overview
        function renderFinancialOverview() {
            // Calculate financial metrics
            const currentBalance = clubData.transactions.reduce((sum, t) => {
                return t.type === 'income' ? sum + t.amount : sum - t.amount;
            }, 0);
            
            const currentMonth = new Date().getMonth();
            const currentYear = new Date().getFullYear();
            
            const monthlyIncome = clubData.transactions
                .filter(t => t.type === 'income' && 
                    new Date(t.date).getMonth() === currentMonth &&
                    new Date(t.date).getFullYear() === currentYear)
                .reduce((sum, t) => sum + t.amount, 0);
                
            const monthlyExpenses = clubData.transactions
                .filter(t => t.type === 'expense' && 
                    new Date(t.date).getMonth() === currentMonth &&
                    new Date(t.date).getFullYear() === currentYear)
                .reduce((sum, t) => sum + t.amount, 0);
                
            const monthlyNet = monthlyIncome - monthlyExpenses;
            
            // Update UI
            document.getElementById('currentBalance').textContent = `$${currentBalance.toFixed(2)}`;
            document.getElementById('monthlyIncome').textContent = `$${monthlyIncome.toFixed(2)}`;
            document.getElementById('monthlyExpenses').textContent = `$${monthlyExpenses.toFixed(2)}`;
            document.getElementById('monthlyNet').textContent = `$${monthlyNet.toFixed(2)}`;
        }

        // FIXED: Transaction Management
        function showTransactionForm(type) {
            document.getElementById('transactionForm').style.display = 'block';
            document.getElementById('transactionType').value = type;
            document.getElementById('transactionFormTitle').textContent = `Add ${type === 'income' ? 'Income' : 'Expense'}`;
        }

        function hideTransactionForm() {
            document.getElementById('transactionForm').style.display = 'none';
        }

        function saveTransaction() {
            const type = document.getElementById('transactionType').value;
            const amount = parseFloat(document.getElementById('transactionAmount').value);
            const description = document.getElementById('transactionDescription').value;
            const memberId = document.getElementById('transactionMember').value;
            const category = document.getElementById('transactionCategory').value;
            const date = document.getElementById('transactionDate').value;
            
            if (!type || isNaN(amount) || !description || !date) {
                alert('Please fill in all required fields with valid values.');
                return;
            }
            
            const member = memberId ? clubData.members.find(m => m.id == memberId) : null;
            
            const newTransaction = {
                id: clubData.transactions.length + 1,
                type: type,
                amount: amount,
                description: description,
                member: member ? member.name : null,
                category: category,
                date: date,
                timestamp: new Date().toISOString()
            };
            
            clubData.transactions.push(newTransaction);
            saveData();
            renderFinancialOverview();
            renderTransactions();
            hideTransactionForm();
            alert('Transaction saved successfully!');
        }

        function renderTransactions() {
            const allTransactions = document.getElementById('allTransactions');
            const recentTransactions = document.getElementById('recentTransactions');
            
            // Sort transactions by date (newest first)
            const sortedTransactions = [...clubData.transactions].sort((a, b) => 
                new Date(b.date) - new Date(a.date)
            );
            
            // Recent transactions (last 5)
            const recent = sortedTransactions.slice(0, 5);
            
            if (recent.length === 0) {
                recentTransactions.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #666;">
                        <p>No recent transactions.</p>
                    </div>
                `;
            } else {
                recentTransactions.innerHTML = recent.map(transaction => `
                    <div class="transaction-item">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                            <div style="font-weight: bold;">${transaction.description}</div>
                            <div style="color: ${transaction.type === 'income' ? '#2d5a27' : '#dc3545'};">
                                ${transaction.type === 'income' ? '+' : '-'}$${transaction.amount.toFixed(2)}
                            </div>
                        </div>
                        <div style="display: flex; justify-content: space-between; font-size: 0.9em; color: #666;">
                            <div>${formatDate(transaction.date)}</div>
                            <div>${transaction.category}</div>
                        </div>
                    </div>
                `).join('');
            }
            
            // All transactions
            if (sortedTransactions.length === 0) {
                allTransactions.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #666;">
                        <p>No transactions recorded.</p>
                        <p>Add transactions using the form above.</p>
                    </div>
                `;
            } else {
                allTransactions.innerHTML = sortedTransactions.map(transaction => `
                    <div class="transaction-item">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                            <div style="font-weight: bold;">${transaction.description}</div>
                            <div style="color: ${transaction.type === 'income' ? '#2d5a27' : '#dc3545'};">
                                ${transaction.type === 'income' ? '+' : '-'}$${transaction.amount.toFixed(2)}
                            </div>
                        </div>
                        <div style="display: flex; justify-content: space-between; font-size: 0.9em; color: #666;">
                            <div>${formatDate(transaction.date)}</div>
                            <div>${transaction.category}</div>
                        </div>
                        <div class="transaction-actions">
                            <button class="edit-transaction-btn" onclick="editTransaction(${transaction.id})">Edit</button>
                            <button class="btn-danger" onclick="deleteTransaction(${transaction.id})">Delete</button>
                        </div>
                    </div>
                `).join('');
            }
        }

        // FIXED: Secretary content rendering
        function renderSecretaryContent() {
            renderMeetings();
            renderNotices();
        }

        // FIXED: Meeting Management
        function showMeetingForm() {
            document.getElementById('meetingForm').style.display = 'block';
        }

        function hideMeetingForm() {
            document.getElementById('meetingForm').style.display = 'none';
        }

        function saveMeeting() {
            const title = document.getElementById('meetingTitle').value;
            const date = document.getElementById('meetingDate').value;
            const time = document.getElementById('meetingTime').value;
            const location = document.getElementById('meetingLocation').value;
            const agenda = document.getElementById('meetingAgenda').value;
            
            if (!title || !date || !location) {
                alert('Please fill in all required fields.');
                return;
            }
            
            const newMeeting = {
                id: clubData.meetings.length + 1,
                title: title,
                date: date,
                time: time,
                location: location,
                agenda: agenda,
                minutes: "",
                attachments: []
            };
            
            clubData.meetings.push(newMeeting);
            saveData();
            renderMeetings();
            hideMeetingForm();
            alert('Meeting scheduled successfully!');
        }

        function renderMeetings() {
            const nextMeeting = document.getElementById('nextMeeting');
            const pastMeetings = document.getElementById('pastMeetings');
            
            // Sort meetings by date
            const sortedMeetings = [...clubData.meetings].sort((a, b) => 
                new Date(a.date) - new Date(b.date)
            );
            
            // Find next meeting (first meeting with date >= today)
            const today = new Date().toISOString().split('T')[0];
            const next = sortedMeetings.find(m => m.date >= today);
            
            if (next) {
                nextMeeting.innerHTML = `
                    <div class="meeting-item">
                        <div class="event-header">
                            <div class="event-title">${next.title}</div>
                            <div class="event-date">${formatDate(next.date)} at ${next.time}</div>
                        </div>
                        <div style="margin-bottom: 10px;">
                            <strong>Location:</strong> ${next.location}
                        </div>
                        <div>
                            <strong>Agenda:</strong> ${next.agenda}
                        </div>
                    </div>
                `;
            } else {
                nextMeeting.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #666;">
                        <p>No upcoming meetings scheduled.</p>
                        <p>Schedule a meeting using the form above.</p>
                    </div>
                `;
            }
            
            // Past meetings
            const past = sortedMeetings.filter(m => m.date < today);
            
            if (past.length === 0) {
                pastMeetings.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #666;">
                        <p>No past meetings.</p>
                    </div>
                `;
            } else {
                pastMeetings.innerHTML = past.map(meeting => `
                    <div class="meeting-item">
                        <div class="event-header">
                            <div class="event-title">${meeting.title}</div>
                            <div class="event-date">${formatDate(meeting.date)}</div>
                        </div>
                        <div style="margin-bottom: 10px;">
                            <strong>Location:</strong> ${meeting.location}
                        </div>
                        <div class="game-actions">
                            <button class="edit-game-btn" onclick="editMeeting(${meeting.id})">Edit</button>
                            <button class="btn-danger" onclick="deleteMeeting(${meeting.id})">Delete</button>
                        </div>
                    </div>
                `).join('');
            }
        }

        // FIXED: Notice Management
        function showNoticeForm() {
            document.getElementById('noticeForm').style.display = 'block';
        }

        function hideNoticeForm() {
            document.getElementById('noticeForm').style.display = 'none';
        }

        function sendNotice() {
            const title = document.getElementById('noticeTitle').value;
            const content = document.getElementById('noticeContent').value;
            const recipients = document.getElementById('noticeRecipients').value;
            
            if (!title || !content) {
                alert('Please fill in all required fields.');
                return;
            }
            
            const newNotice = {
                id: clubData.notices.length + 1,
                title: title,
                content: content,
                recipients: recipients,
                date: new Date().toISOString().split('T')[0]
            };
            
            clubData.notices.unshift(newNotice);
            saveData();
            renderNotices();
            hideNoticeForm();
            alert('Notice sent successfully!');
        }

        function renderNotices() {
            const recentNotices = document.getElementById('recentNotices');
            const recent = clubData.notices.slice(0, 10); // Show last 10 notices
            
            if (recent.length === 0) {
                recentNotices.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #666;">
                        <p>No notices sent yet.</p>
                        <p>Send a notice using the form above.</p>
                    </div>
                `;
            } else {
                recentNotices.innerHTML = recent.map(notice => `
                    <div class="event-item">
                        <div class="event-header">
                            <div class="event-title">${notice.title}</div>
                            <div class="event-date">${formatDate(notice.date)}</div>
                        </div>
                        <div style="margin-bottom: 10px;">
                            <strong>Recipients:</strong> ${notice.recipients === 'all' ? 'All Members' : 
                                notice.recipients === 'board' ? 'Board Members Only' : 'Specific Members'}
                        </div>
                        <div style="margin-bottom: 10px;">
                            ${notice.content}
                        </div>
                        <div class="game-actions">
                            <button class="edit-game-btn" onclick="editNotice(${notice.id})">Edit</button>
                            <button class="btn-danger" onclick="deleteNotice(${notice.id})">Delete</button>
                        </div>
                    </div>
                `).join('');
            }
        }

        // Initialize everything when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            initializeData();
        });
    </script>
</body>
</html>